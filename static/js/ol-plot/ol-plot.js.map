{"version":3,"file":"ol-plot.js","sources":["../node_modules/observable-emit/src/index.js","../src/Constants.js","../src/Utils/utils.js","../src/Utils/layerUtils.js","../node_modules/autosize/dist/autosize.js","../src/Utils/domUtils.js","../src/Geometry/Text/PlotTextBox.js","../src/Utils/PlotTypes.js","../src/Geometry/point/Point.js","../src/Geometry/point/Pennant.js","../src/Geometry/Polyline/Polyline.js","../src/Geometry/Arc/Arc.js","../src/Geometry/Circle/Circle.js","../src/Geometry/Polyline/Curve.js","../src/Geometry/Polyline/FreeHandLine.js","../src/Geometry/Polygon/RectAngle.js","../src/Geometry/Circle/Ellipse.js","../src/Geometry/Polygon/Lune.js","../src/Geometry/Polygon/Sector.js","../src/Geometry/Polygon/ClosedCurve.js","../src/Geometry/Polygon/Polygon.js","../src/Geometry/Polygon/FreePolygon.js","../src/Geometry/Arrow/AttackArrow.js","../src/Geometry/Arrow/DoubleArrow.js","../src/Geometry/Arrow/StraightArrow.js","../src/Geometry/Arrow/FineArrow.js","../src/Geometry/Arrow/AssaultDirection.js","../src/Geometry/Arrow/TailedAttackArrow.js","../src/Geometry/Arrow/SquadCombat.js","../src/Geometry/Arrow/TailedSquadCombat.js","../src/Geometry/Polygon/GatheringPlace.js","../src/Geometry/Flag/RectFlag.js","../src/Geometry/Flag/TriangleFlag.js","../src/Geometry/Flag/CurveFlag.js","../src/core/PlotDraw.js","../src/core/PlotEdit.js","../src/Utils/factory.js","../src/core/PlotUtils.js","../src/index.js"],"sourcesContent":["const Observable = function () {\n  this.Events = {}\n  this.__cnt = 0\n}\n\nObservable.hasOwnKey = Function.call.bind(Object.hasOwnProperty)\n\nObservable.slice = Function.call.bind(Array.prototype.slice)\n\n/**\n * 事件分发\n * @param eventName\n * @param callback\n * @param context\n * @returns {(*|*)[]}\n */\nObservable.prototype.on = function (eventName, callback, context) {\n  return (this.bindEvent(eventName, callback, 0, context))\n}\n\n/**\n * 取消监听\n * @param event\n * @returns {boolean}\n */\nObservable.prototype.un = function (event) {\n  var eventName = ''\n  var key = ''\n  var r = false\n  var type = typeof event\n  var that = this\n  if (type === 'string') {\n    if (Observable.hasOwnKey(this.Events, event)) {\n      delete this.Events[event]\n      return true\n    }\n    return false\n  } else if (type === 'object') {\n    eventName = event[0]\n    key = event[1]\n    if (Observable.hasOwnKey(this.Events, eventName) && Observable.hasOwnKey(this.Events[eventName], key)) {\n      delete this.Events[eventName][key]\n      return true\n    }\n    return false\n  } else if (type === 'function') {\n    that.eachEvent(that.Events, function (keyA, itemA) {\n      that.eachEvent(itemA, function (keyB, itemB) {\n        if (itemB[0] === event) {\n          delete that.Events[keyA][keyB]\n          r = true\n        }\n      })\n    })\n    return r\n  }\n  return true\n}\n\n/**\n * 事件监听（只触发一次）\n * @param eventName\n * @param callback\n * @param context\n * @returns {(*|*)[]}\n */\nObservable.prototype.once = function (eventName, callback, context) {\n  return (this.bindEvent(eventName, callback, 1, context))\n}\n\n/**\n * 响应事件\n * @param eventName\n * @param args\n */\nObservable.prototype.action = function (eventName, args) {\n  if (Observable.hasOwnKey(this.Events, eventName)) {\n    this.eachEvent(this.Events[eventName], function (key, item) {\n      item[0].apply(item[2], args)\n      if (item[1]) {\n        delete this.Events[eventName][key]\n      }\n    })\n  }\n}\n\n/**\n * 实时触发响应\n * @param eventName\n */\nObservable.prototype.dispatch = function (eventName) {\n  var that = this\n  var args = Observable.slice(arguments, 1)\n  setTimeout(function () {\n    that.action(eventName, args)\n  })\n}\n\n/**\n * 延后触发响应\n * @param eventName\n */\nObservable.prototype.dispatchSync = function (eventName) {\n  this.action(eventName, Observable.slice(arguments, 1))\n}\n\n/**\n * 清空发布中心\n */\nObservable.prototype.clear = function () {\n  this.Events = {}\n}\n\n/**\n * 绑定事件\n * @param eventName\n * @param callback\n * @param isOne\n * @param context\n * @returns {[*,*]}\n */\nObservable.prototype.bindEvent = function (eventName, callback, isOne, context) {\n  if (typeof eventName !== 'string' || typeof callback !== 'function') {\n    throw new Error('传入的事件名称和回调函数有误！')\n  }\n  if (!Observable.hasOwnKey(this.Events, eventName)) {\n    this.Events[eventName] = {}\n  }\n  this.Events[eventName][++this.__cnt] = [callback, isOne, context]\n  return [eventName, this.__cnt]\n}\n\n/**\n * 循环触发事件\n * @param obj\n * @param callback\n */\nObservable.prototype.eachEvent = function (obj, callback) {\n  for (var key in obj) {\n    if (Observable.hasOwnKey(obj, key)) {\n      callback(key, obj[key])\n    }\n  }\n}\n\nexport default Observable\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 常用变量\r\n */\r\nexport const FITTING_COUNT = 100\r\nexport const HALF_PI = Math.PI / 2\r\nexport const ZERO_TOLERANCE = 0.0001\r\nexport const TWO_PI = Math.PI * 2\r\nexport const BASE_LAYERNAME = 'ol-plot-vector-layer' // 矢量图层名，（唯一标识）\r\nexport const BASE_HELP_CONTROL_POINT_ID = 'plot-helper-control-point-div' // 控制点要素的基类id\r\nexport const BASE_HELP_HIDDEN = 'plot-helper-hidden-div' // 父类隐藏容器\r\nexport const DEF_TEXT_STYEL = { // 默认文本框样式\r\n  borderRadius: '2px',\r\n  fontSize: '12px',\r\n  outline: 0,\r\n  overflow: 'hidden',\r\n  boxSizing: 'border-box',\r\n  border: '1px solid #eeeeee',\r\n  fontFamily: 'Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Noto Sans CJK SC,WenQuanYi Micro Hei,Arial,sans-serif',\r\n  color: '#010500',\r\n  fontWeight: 400,\r\n  padding: '3px',\r\n  fontStretch: 'normal',\r\n  lineHeight: 'normal',\r\n  textAlign: 'left',\r\n  marginLeft: 'auto',\r\n  marginRight: 'auto',\r\n  width: 'auto',\r\n  height: 'auto',\r\n  background: 'rgb(255, 255, 255)',\r\n  fontStyle: '',\r\n  fontVariant: ''\r\n}\r\n","import * as Constants from '../Constants'\r\n/**\r\n * 计算两个坐标之间的距离\r\n * @param pnt1\r\n * @param pnt2\r\n * @returns {number}\r\n * @constructor\r\n */\r\nexport const MathDistance = (pnt1, pnt2) => {\r\n  return (Math.sqrt(Math.pow((pnt1[0] - pnt2[0]), 2) + Math.pow((pnt1[1] - pnt2[1]), 2)))\r\n}\r\n\r\n/**\r\n * 计算点集合的总距离\r\n * @param points\r\n * @returns {number}\r\n */\r\nexport const wholeDistance = (points) => {\r\n  let distance = 0\r\n  if (points && Array.isArray(points) && points.length > 0) {\r\n    points.forEach((item, index) => {\r\n      if (index < points.length - 1) {\r\n        distance += (MathDistance(item, points[index + 1]))\r\n      }\r\n    })\r\n  }\r\n  return distance\r\n}\r\n/**\r\n * 获取基础长度\r\n * @param points\r\n * @returns {number}\r\n */\r\nexport const getBaseLength = (points) => {\r\n  return Math.pow(wholeDistance(points), 0.99)\r\n}\r\n\r\n/**\r\n * 求取两个坐标的中间值\r\n * @param point1\r\n * @param point2\r\n * @returns {[*,*]}\r\n * @constructor\r\n */\r\nexport const Mid = (point1, point2) => {\r\n  return [(point1[0] + point2[0]) / 2, (point1[1] + point2[1]) / 2]\r\n}\r\n\r\n/**\r\n * 通过三个点确定一个圆的中心点\r\n * @param point1\r\n * @param point2\r\n * @param point3\r\n */\r\nexport const getCircleCenterOfThreePoints = (point1, point2, point3) => {\r\n  let pntA = [(point1[0] + point2[0]) / 2, (point1[1] + point2[1]) / 2]\r\n  let pntB = [pntA[0] - point1[1] + point2[1], pntA[1] + point1[0] - point2[0]]\r\n  let pntC = [(point1[0] + point3[0]) / 2, (point1[1] + point3[1]) / 2]\r\n  let pntD = [pntC[0] - point1[1] + point3[1], pntC[1] + point1[0] - point3[0]]\r\n  return getIntersectPoint(pntA, pntB, pntC, pntD)\r\n}\r\n\r\n/**\r\n * 获取交集的点\r\n * @param pntA\r\n * @param pntB\r\n * @param pntC\r\n * @param pntD\r\n * @returns {[*,*]}\r\n */\r\nexport const getIntersectPoint = (pntA, pntB, pntC, pntD) => {\r\n  if (pntA[1] === pntB[1]) {\r\n    let f = (pntD[0] - pntC[0]) / (pntD[1] - pntC[1])\r\n    let x = f * (pntA[1] - pntC[1]) + pntC[0]\r\n    let y = pntA[1]\r\n    return [x, y]\r\n  }\r\n  if (pntC[1] === pntD[1]) {\r\n    let e = (pntB[0] - pntA[0]) / (pntB[1] - pntA[1])\r\n    let x = e * (pntC[1] - pntA[1]) + pntA[0]\r\n    let y = pntC[1]\r\n    return [x, y]\r\n  }\r\n  let e = (pntB[0] - pntA[0]) / (pntB[1] - pntA[1])\r\n  let f = (pntD[0] - pntC[0]) / (pntD[1] - pntC[1])\r\n  let y = (e * pntA[1] - pntA[0] - f * pntC[1] + pntC[0]) / (e - f)\r\n  let x = e * y - e * pntA[1] + pntA[0]\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 获取方位角（地平经度）\r\n * @param startPoint\r\n * @param endPoint\r\n * @returns {*}\r\n */\r\nexport const getAzimuth = (startPoint, endPoint) => {\r\n  let azimuth\r\n  let angle = Math.asin(Math.abs(endPoint[1] - startPoint[1]) / (MathDistance(startPoint, endPoint)))\r\n  if (endPoint[1] >= startPoint[1] && endPoint[0] >= startPoint[0]) {\r\n    azimuth = angle + Math.PI\r\n  } else if (endPoint[1] >= startPoint[1] && endPoint[0] < startPoint[0]) {\r\n    azimuth = Math.PI * 2 - angle\r\n  } else if (endPoint[1] < startPoint[1] && endPoint[0] < startPoint[0]) {\r\n    azimuth = angle\r\n  } else if (endPoint[1] < startPoint[1] && endPoint[0] >= startPoint[0]) {\r\n    azimuth = Math.PI - angle\r\n  }\r\n  return azimuth\r\n}\r\n\r\n/**\r\n * 通过三个点获取方位角\r\n * @param pntA\r\n * @param pntB\r\n * @param pntC\r\n * @returns {number}\r\n */\r\nexport const getAngleOfThreePoints = (pntA, pntB, pntC) => {\r\n  let angle = getAzimuth(pntB, pntA) - getAzimuth(pntB, pntC)\r\n  return ((angle < 0) ? (angle + Math.PI * 2) : angle)\r\n}\r\n\r\n/**\r\n * 判断是否是顺时针\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {boolean}\r\n */\r\nexport const isClockWise = (pnt1, pnt2, pnt3) => {\r\n  return ((pnt3[1] - pnt1[1]) * (pnt2[0] - pnt1[0]) > (pnt2[1] - pnt1[1]) * (pnt3[0] - pnt1[0]))\r\n}\r\n\r\n/**\r\n * 获取线上的点\r\n * @param t\r\n * @param startPnt\r\n * @param endPnt\r\n * @returns {[*,*]}\r\n */\r\nexport const getPointOnLine = (t, startPnt, endPnt) => {\r\n  let x = startPnt[0] + (t * (endPnt[0] - startPnt[0]))\r\n  let y = startPnt[1] + (t * (endPnt[1] - startPnt[1]))\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 获取立方值\r\n * @param t\r\n * @param startPnt\r\n * @param cPnt1\r\n * @param cPnt2\r\n * @param endPnt\r\n * @returns {[*,*]}\r\n */\r\nexport const getCubicValue = (t, startPnt, cPnt1, cPnt2, endPnt) => {\r\n  t = Math.max(Math.min(t, 1), 0)\r\n  let [tp, t2] = [(1 - t), (t * t)]\r\n  let t3 = t2 * t\r\n  let tp2 = tp * tp\r\n  let tp3 = tp2 * tp\r\n  let x = (tp3 * startPnt[0]) + (3 * tp2 * t * cPnt1[0]) + (3 * tp * t2 * cPnt2[0]) + (t3 * endPnt[0])\r\n  let y = (tp3 * startPnt[1]) + (3 * tp2 * t * cPnt1[1]) + (3 * tp * t2 * cPnt2[1]) + (t3 * endPnt[1])\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 根据起止点和旋转方向求取第三个点\r\n * @param startPnt\r\n * @param endPnt\r\n * @param angle\r\n * @param distance\r\n * @param clockWise\r\n * @returns {[*,*]}\r\n */\r\nexport const getThirdPoint = (startPnt, endPnt, angle, distance, clockWise) => {\r\n  let azimuth = getAzimuth(startPnt, endPnt)\r\n  let alpha = clockWise ? (azimuth + angle) : (azimuth - angle)\r\n  let dx = distance * Math.cos(alpha)\r\n  let dy = distance * Math.sin(alpha)\r\n  return ([endPnt[0] + dx, endPnt[1] + dy])\r\n}\r\n\r\n/**\r\n * 函数继承\r\n * @param childCtor\r\n * @param parentCtor\r\n */\r\nexport const inherits = (childCtor, parentCtor) => {\r\n  /** @constructor */\r\n  function TempCtor () {\r\n  }\r\n\r\n  TempCtor.prototype = parentCtor.prototype\r\n  childCtor.superClass_ = parentCtor.prototype\r\n  childCtor.prototype = new TempCtor()\r\n  /** @override */\r\n  childCtor.prototype.constructor = childCtor\r\n  childCtor.base = function (me, methodName, varArgs) {\r\n    let args = Array.prototype.slice.call(arguments, 2)\r\n    return parentCtor.prototype[methodName].apply(me, args)\r\n  }\r\n}\r\n\r\n/**\r\n * 插值弓形线段点\r\n * @param center\r\n * @param radius\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns {null}\r\n */\r\nexport const getArcPoints = (center, radius, startAngle, endAngle) => {\r\n  let [x, y, pnts, angleDiff] = [null, null, [], (endAngle - startAngle)]\r\n  angleDiff = ((angleDiff < 0) ? (angleDiff + (Math.PI * 2)) : angleDiff)\r\n  for (let i = 0; i <= 100; i++) {\r\n    let angle = startAngle + angleDiff * i / 100\r\n    x = center[0] + radius * Math.cos(angle)\r\n    y = center[1] + radius * Math.sin(angle)\r\n    pnts.push([x, y])\r\n  }\r\n  return pnts\r\n}\r\n\r\n/**\r\n * getBisectorNormals\r\n * @param t\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {[*,*]}\r\n */\r\nexport const getBisectorNormals = (t, pnt1, pnt2, pnt3) => {\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let [bisectorNormalRight, bisectorNormalLeft, dt, x, y] = [null, null, null, null, null]\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  let uX = normal[0] / dist\r\n  let uY = normal[1] / dist\r\n  let d1 = MathDistance(pnt1, pnt2)\r\n  let d2 = MathDistance(pnt2, pnt3)\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    if (isClockWise(pnt1, pnt2, pnt3)) {\r\n      dt = t * d1\r\n      x = pnt2[0] - dt * uY\r\n      y = pnt2[1] + dt * uX\r\n      bisectorNormalRight = [x, y]\r\n      dt = t * d2\r\n      x = pnt2[0] + dt * uY\r\n      y = pnt2[1] - dt * uX\r\n      bisectorNormalLeft = [x, y]\r\n    } else {\r\n      dt = t * d1\r\n      x = pnt2[0] + dt * uY\r\n      y = pnt2[1] - dt * uX\r\n      bisectorNormalRight = [x, y]\r\n      dt = t * d2\r\n      x = pnt2[0] - dt * uY\r\n      y = pnt2[1] + dt * uX\r\n      bisectorNormalLeft = [x, y]\r\n    }\r\n  } else {\r\n    x = pnt2[0] + t * (pnt1[0] - pnt2[0])\r\n    y = pnt2[1] + t * (pnt1[1] - pnt2[1])\r\n    bisectorNormalRight = [x, y]\r\n    x = pnt2[0] + t * (pnt3[0] - pnt2[0])\r\n    y = pnt2[1] + t * (pnt3[1] - pnt2[1])\r\n    bisectorNormalLeft = [x, y]\r\n  }\r\n  return [bisectorNormalRight, bisectorNormalLeft]\r\n}\r\n\r\n/**\r\n * 获取默认三点的内切圆\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {[*,*]}\r\n */\r\nexport const getNormal = (pnt1, pnt2, pnt3) => {\r\n  let dX1 = pnt1[0] - pnt2[0]\r\n  let dY1 = pnt1[1] - pnt2[1]\r\n  let d1 = Math.sqrt(dX1 * dX1 + dY1 * dY1)\r\n  dX1 /= d1\r\n  dY1 /= d1\r\n  let dX2 = pnt3[0] - pnt2[0]\r\n  let dY2 = pnt3[1] - pnt2[1]\r\n  let d2 = Math.sqrt(dX2 * dX2 + dY2 * dY2)\r\n  dX2 /= d2\r\n  dY2 /= d2\r\n  let uX = dX1 + dX2\r\n  let uY = dY1 + dY2\r\n  return [uX, uY]\r\n}\r\n\r\n/**\r\n * 获取左边控制点\r\n * @param controlPoints\r\n * @returns {[*,*]}\r\n */\r\nexport const getLeftMostControlPoint = (controlPoints, t) => {\r\n  let [pnt1, pnt2, pnt3, controlX, controlY] = [controlPoints[0], controlPoints[1], controlPoints[2], null, null]\r\n  let pnts = getBisectorNormals(0, pnt1, pnt2, pnt3)\r\n  let normalRight = pnts[0]\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    let mid = Mid(pnt1, pnt2)\r\n    let pX = pnt1[0] - mid[0]\r\n    let pY = pnt1[1] - mid[1]\r\n    let d1 = MathDistance(pnt1, pnt2)\r\n    let n = 2.0 / d1\r\n    let nX = -n * pY\r\n    let nY = n * pX\r\n    let a11 = nX * nX - nY * nY\r\n    let a12 = 2 * nX * nY\r\n    let a22 = nY * nY - nX * nX\r\n    let dX = normalRight[0] - mid[0]\r\n    let dY = normalRight[1] - mid[1]\r\n    controlX = mid[0] + a11 * dX + a12 * dY\r\n    controlY = mid[1] + a12 * dX + a22 * dY\r\n  } else {\r\n    controlX = pnt1[0] + t * (pnt2[0] - pnt1[0])\r\n    controlY = pnt1[1] + t * (pnt2[1] - pnt1[1])\r\n  }\r\n  return [controlX, controlY]\r\n}\r\n\r\n/**\r\n * 获取右边控制点\r\n * @param controlPoints\r\n * @param t\r\n * @returns {[*,*]}\r\n */\r\nexport const getRightMostControlPoint = (controlPoints, t) => {\r\n  let count = controlPoints.length\r\n  let pnt1 = controlPoints[count - 3]\r\n  let pnt2 = controlPoints[count - 2]\r\n  let pnt3 = controlPoints[count - 1]\r\n  let pnts = getBisectorNormals(0, pnt1, pnt2, pnt3)\r\n  let normalLeft = pnts[1]\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  let [controlX, controlY] = [null, null]\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    let mid = Mid(pnt2, pnt3)\r\n    let pX = pnt3[0] - mid[0]\r\n    let pY = pnt3[1] - mid[1]\r\n    let d1 = MathDistance(pnt2, pnt3)\r\n    let n = 2.0 / d1\r\n    let nX = -n * pY\r\n    let nY = n * pX\r\n    let a11 = nX * nX - nY * nY\r\n    let a12 = 2 * nX * nY\r\n    let a22 = nY * nY - nX * nX\r\n    let dX = normalLeft[0] - mid[0]\r\n    let dY = normalLeft[1] - mid[1]\r\n    controlX = mid[0] + a11 * dX + a12 * dY\r\n    controlY = mid[1] + a12 * dX + a22 * dY\r\n  } else {\r\n    controlX = pnt3[0] + t * (pnt2[0] - pnt3[0])\r\n    controlY = pnt3[1] + t * (pnt2[1] - pnt3[1])\r\n  }\r\n  return [controlX, controlY]\r\n}\r\n\r\n/**\r\n * 插值曲线点\r\n * @param t\r\n * @param controlPoints\r\n * @returns {null}\r\n */\r\nexport const getCurvePoints = (t, controlPoints) => {\r\n  let leftControl = getLeftMostControlPoint(controlPoints, t)\r\n  let [pnt1, pnt2, pnt3, normals, points] = [null, null, null, [leftControl], []]\r\n  for (let i = 0; i < controlPoints.length - 2; i++) {\r\n    [pnt1, pnt2, pnt3] = [controlPoints[i], controlPoints[i + 1], controlPoints[i + 2]]\r\n    let normalPoints = getBisectorNormals(t, pnt1, pnt2, pnt3)\r\n    normals = normals.concat(normalPoints)\r\n  }\r\n  let rightControl = getRightMostControlPoint(controlPoints, t)\r\n  if (rightControl) {\r\n    normals.push(rightControl)\r\n  }\r\n  for (let i = 0; i < controlPoints.length - 1; i++) {\r\n    pnt1 = controlPoints[i]\r\n    pnt2 = controlPoints[i + 1]\r\n    points.push(pnt1)\r\n    for (let t = 0; t < Constants.FITTING_COUNT; t++) {\r\n      let pnt = getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n      points.push(pnt)\r\n    }\r\n    points.push(pnt2)\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * 贝塞尔曲线\r\n * @param points\r\n * @returns {*}\r\n */\r\nexport const getBezierPoints = function (points) {\r\n  if (points.length <= 2) {\r\n    return points\r\n  } else {\r\n    let bezierPoints = []\r\n    let n = points.length - 1\r\n    for (let t = 0; t <= 1; t += 0.01) {\r\n      let [x, y] = [0, 0]\r\n      for (let index = 0; index <= n; index++) {\r\n        let factor = getBinomialFactor(n, index)\r\n        let a = Math.pow(t, index)\r\n        let b = Math.pow((1 - t), (n - index))\r\n        x += factor * a * b * points[index][0]\r\n        y += factor * a * b * points[index][1]\r\n      }\r\n      bezierPoints.push([x, y])\r\n    }\r\n    bezierPoints.push(points[n])\r\n    return bezierPoints\r\n  }\r\n}\r\n\r\n/**\r\n * 获取阶乘数据\r\n * @param n\r\n * @returns {number}\r\n */\r\nexport const getFactorial = (n) => {\r\n  let result = 1\r\n  switch (n) {\r\n    case (n <= 1):\r\n      result = 1\r\n      break\r\n    case (n === 2):\r\n      result = 2\r\n      break\r\n    case (n === 3):\r\n      result = 6\r\n      break\r\n    case (n === 24):\r\n      result = 24\r\n      break\r\n    case (n === 5):\r\n      result = 120\r\n      break\r\n    default:\r\n      for (let i = 1; i <= n; i++) {\r\n        result *= i\r\n      }\r\n      break\r\n  }\r\n  return result\r\n}\r\n\r\n/**\r\n * 获取二项分布\r\n * @param n\r\n * @param index\r\n * @returns {number}\r\n */\r\nexport const getBinomialFactor = (n, index) => {\r\n  return (getFactorial(n) / (getFactorial(index) * getFactorial(n - index)))\r\n}\r\n\r\n/**\r\n * 插值线性点\r\n * @param points\r\n * @returns {*}\r\n */\r\nexport const getQBSplinePoints = points => {\r\n  if (points.length <= 2) {\r\n    return points\r\n  } else {\r\n    let [n, bSplinePoints] = [2, []]\r\n    let m = points.length - n - 1\r\n    bSplinePoints.push(points[0])\r\n    for (let i = 0; i <= m; i++) {\r\n      for (let t = 0; t <= 1; t += 0.05) {\r\n        let [x, y] = [0, 0]\r\n        for (let k = 0; k <= n; k++) {\r\n          let factor = getQuadricBSplineFactor(k, t)\r\n          x += factor * points[i + k][0]\r\n          y += factor * points[i + k][1]\r\n        }\r\n        bSplinePoints.push([x, y])\r\n      }\r\n    }\r\n    bSplinePoints.push(points[points.length - 1])\r\n    return bSplinePoints\r\n  }\r\n}\r\n\r\n/**\r\n * 得到二次线性因子\r\n * @param k\r\n * @param t\r\n * @returns {number}\r\n */\r\nexport const getQuadricBSplineFactor = (k, t) => {\r\n  let res = 0\r\n  if (k === 0) {\r\n    res = Math.pow(t - 1, 2) / 2\r\n  } else if (k === 1) {\r\n    res = (-2 * Math.pow(t, 2) + 2 * t + 1) / 2\r\n  } else if (k === 2) {\r\n    res = Math.pow(t, 2) / 2\r\n  }\r\n  return res\r\n}\r\n\r\n/**\r\n * 获取id\r\n * @returns {*|string|!Array.<T>}\r\n */\r\nexport const getuuid = () => {\r\n  let [ s, hexDigits ] = [ [], '0123456789abcdef' ]\r\n  for (let i = 0; i < 36; i++) {\r\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1)\r\n  }\r\n  s[14] = '4'\r\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1)\r\n  s[8] = s[13] = s[18] = s[23] = '-'\r\n  return (s.join(''))\r\n}\r\n\r\n/**\r\n * 添加标识\r\n * @param obj\r\n * @returns {*}\r\n */\r\nexport const stamp = function (obj) {\r\n  let key = '_event_id_'\r\n  obj[key] = obj[key] || (getuuid())\r\n  return obj[key]\r\n}\r\n\r\n/**\r\n * 去除字符串前后空格\r\n * @param str\r\n * @returns {*}\r\n */\r\nexport const trim = (str) => {\r\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '')\r\n}\r\n\r\n/**\r\n * 将类名截取成数组\r\n * @param str\r\n * @returns {Array|*}\r\n */\r\nexport const splitWords = (str) => {\r\n  return trim(str).split(/\\s+/)\r\n}\r\n\r\n/**\r\n * 判断是否为对象\r\n * @param value\r\n * @returns {boolean}\r\n */\r\nexport const isObject = value => {\r\n  const type = typeof value\r\n  return value !== null && (type === 'object' || type === 'function')\r\n}\r\n\r\n/**\r\n * merge\r\n * @param a\r\n * @param b\r\n * @returns {*}\r\n */\r\nexport const merge = (a, b) => {\r\n  for (const key in b) {\r\n    if (isObject(b[key]) && isObject(a[key])) {\r\n      merge(a[key], b[key])\r\n    } else {\r\n      a[key] = b[key]\r\n    }\r\n  }\r\n  return a\r\n}\r\n\r\nexport function preventDefault (e) {\r\n  e = e || window.event\r\n  if (e.preventDefault) {\r\n    e.preventDefault()\r\n  } else {\r\n    e.returnValue = false\r\n  }\r\n}\r\n","import ol from 'openlayers'\r\nconst $Group = ol.layer.Group\r\nconst $VectorLayer = ol.layer.Vector\r\nconst $VectorSource = ol.source.Vector\r\nconst $Style = ol.style.Style\r\nconst $Stroke = ol.style.Stroke\r\nconst $Circle = ol.style.Circle\r\nconst $Fill = ol.style.Fill\r\n\r\n/**\r\n * 通过layerName获取图层\r\n * @param map\r\n * @param layerName\r\n * @returns {*}\r\n */\r\nconst getLayerByLayerName = function (map, layerName) {\r\n  try {\r\n    let targetLayer = null\r\n    if (map) {\r\n      let layers = map.getLayers().getArray()\r\n      targetLayer = getLayerInternal(layers, 'layerName', layerName)\r\n    }\r\n    return targetLayer\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 内部处理获取图层方法\r\n * @param layers\r\n * @param key\r\n * @param value\r\n * @returns {*}\r\n */\r\nconst getLayerInternal = function (layers, key, value) {\r\n  let _target = null\r\n  if (layers.length > 0) {\r\n    layers.every(layer => {\r\n      if (layer instanceof $Group) {\r\n        let layers = layer.getLayers().getArray()\r\n        _target = getLayerInternal(layers, key, value)\r\n        if (_target) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      } else if (layer.get(key) === value) {\r\n        _target = layer\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n  return _target\r\n}\r\n\r\n/**\r\n * 创建临时图层\r\n * @param map\r\n * @param layerName\r\n * @param params\r\n * @returns {*}\r\n */\r\nconst createVectorLayer = function (map, layerName, params) {\r\n  try {\r\n    if (map) {\r\n      let vectorLayer = getLayerByLayerName(map, layerName)\r\n      if (!(vectorLayer instanceof $VectorLayer)) {\r\n        vectorLayer = null\r\n      }\r\n      if (!vectorLayer) {\r\n        if (params && params.create) {\r\n          vectorLayer = new $VectorLayer({\r\n            layerName: layerName,\r\n            params: params,\r\n            layerType: 'vector',\r\n            source: new $VectorSource({\r\n              wrapX: false\r\n            }),\r\n            style: new $Style({\r\n              fill: new $Fill({\r\n                color: 'rgba(67, 110, 238, 0.4)'\r\n              }),\r\n              stroke: new $Stroke({\r\n                color: '#4781d9',\r\n                width: 2\r\n              }),\r\n              image: new $Circle({\r\n                radius: 7,\r\n                fill: new $Fill({\r\n                  color: '#ffcc33'\r\n                })\r\n              })\r\n            })\r\n          })\r\n        }\r\n      }\r\n      if (map && vectorLayer) {\r\n        if (params && params.hasOwnProperty('selectable')) {\r\n          vectorLayer.set('selectable', params.selectable)\r\n        }\r\n        // 图层只添加一次\r\n        let _vectorLayer = getLayerByLayerName(map, layerName)\r\n        if (!_vectorLayer || !(_vectorLayer instanceof $VectorLayer)) {\r\n          map.addLayer(vectorLayer)\r\n        }\r\n      }\r\n      return vectorLayer\r\n    }\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport {\r\n  createVectorLayer,\r\n  getLayerByLayerName\r\n}\r\n","/*!\n\tAutosize 4.0.0\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['exports', 'module'], factory);\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});","/* eslint no-useless-escape: \"off\" */\r\nconst SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g\r\nconst MOZ_HACK_REGEXP = /^moz([A-Z])/\r\n\r\n/* istanbul ignore next */\r\nexport const create = function (tagName, className, container, id) {\r\n  let el = document.createElement(tagName)\r\n  el.className = className || ''\r\n  if (id) {\r\n    el.id = id\r\n  }\r\n  if (container) {\r\n    container.appendChild(el)\r\n  }\r\n  return el\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const getElement = function (id) {\r\n  return typeof id === 'string' ? document.getElementById(id) : id\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const remove = function (el) {\r\n  let parent = el.parentNode\r\n  if (parent) {\r\n    parent.removeChild(el)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const empty = function (el) {\r\n  while (el.firstChild) {\r\n    el.removeChild(el.firstChild)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const createHidden = function (tagName, parent, id) {\r\n  let element = document.createElement(tagName)\r\n  element.style.display = 'none'\r\n  if (id) {\r\n    element.id = id\r\n  }\r\n  if (parent) {\r\n    parent.appendChild(element)\r\n  }\r\n  return element\r\n}\r\n\r\n/* istanbul ignore next */\r\nconst trim = function (string) {\r\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\r\n}\r\n\r\n/* istanbul ignore next */\r\nconst camelCase = function (name) {\r\n  return name.replace(SPECIAL_CHARS_REGEXP, function (_, separator, letter, offset) {\r\n    return offset ? letter.toUpperCase() : letter\r\n  }).replace(MOZ_HACK_REGEXP, 'Moz$1')\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const on = (function () {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\n/* istanbul ignore next */\r\nexport const off = (function () {\r\n  if (document.removeEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\n/* istanbul ignore next */\r\nexport const once = function (el, event, fn) {\r\n  const listener = function () {\r\n    if (fn) {\r\n      fn.apply(this, arguments)\r\n    }\r\n    off(el, event, listener)\r\n  }\r\n  on(el, event, listener)\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function hasClass (el, cls) {\r\n  if (!el || !cls) return false\r\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\r\n  if (el.classList) {\r\n    return el.classList.contains(cls)\r\n  } else {\r\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function addClass (el, cls) {\r\n  if (!el) return\r\n  let curClass = el.className\r\n  let classes = (cls || '').split(' ')\r\n  for (let i = 0, j = classes.length; i < j; i++) {\r\n    let clsName = classes[i]\r\n    if (!clsName) continue\r\n    if (el.classList) {\r\n      el.classList.add(clsName)\r\n    } else if (!hasClass(el, clsName)) {\r\n      curClass += ' ' + clsName\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = curClass\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function removeClass (el, cls) {\r\n  if (!el || !cls) return\r\n  const classes = cls.split(' ')\r\n  let curClass = ' ' + el.className + ' '\r\n  for (let i = 0, j = classes.length; i < j; i++) {\r\n    let clsName = classes[i]\r\n    if (!clsName) continue\r\n    if (el.classList) {\r\n      el.classList.remove(clsName)\r\n    } else if (hasClass(el, clsName)) {\r\n      curClass = curClass.replace(' ' + clsName + ' ', ' ')\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = trim(curClass)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function getStyle (element, styleName) {\r\n  if (!element || !styleName) return null\r\n  styleName = camelCase(styleName)\r\n  if (styleName === 'float') {\r\n    styleName = 'cssFloat'\r\n  }\r\n  try {\r\n    const computed = document.defaultView.getComputedStyle(element, '')\r\n    return element.style[styleName] || computed ? computed[styleName] : null\r\n  } catch (e) {\r\n    return element.style[styleName]\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function setStyle (element, styleName, value) {\r\n  if (!element || !styleName) return\r\n  if (typeof styleName === 'object') {\r\n    for (var prop in styleName) {\r\n      if (styleName.hasOwnProperty(prop)) {\r\n        setStyle(element, prop, styleName[prop])\r\n      }\r\n    }\r\n  } else {\r\n    styleName = camelCase(styleName)\r\n    if (styleName === 'opacity') {\r\n      element.style.filter = isNaN(value) ? '' : 'alpha(opacity=' + value * 100 + ')'\r\n    } else {\r\n      element.style[styleName] = value\r\n    }\r\n  }\r\n}\r\n","import ol from 'openlayers'\r\nimport autosize from 'autosize'\r\nimport {DEF_TEXT_STYEL} from '../../Constants'\r\nimport { merge } from '../../Utils/utils'\r\nimport { on, off, hasClass, setStyle, getStyle } from '../../Utils/domUtils'\r\nconst $DragPan = ol.interaction.DragPan\r\n\r\nclass PlotTextBox extends ol.Overlay {\r\n  constructor (options = {}) {\r\n    const [id, element, offset, stopEvent, positioning, insertFirst,\r\n      autoPan, autoPanAnimation, autoPanMargin, className] = [\r\n      options['id'], options['element'], options['offset'], options['stopEvent'],\r\n      options['positioning'], options['insertFirst'], options['autoPan'],\r\n      options['autoPanAnimation'], options['autoPanMargin'],\r\n      (options['className'] ? options['className'] : 'ol-plot-text-editor')\r\n    ]\r\n    super({\r\n      id,\r\n      element,\r\n      stopEvent,\r\n      insertFirst,\r\n      autoPan,\r\n      autoPanAnimation,\r\n      autoPanMargin,\r\n      className\r\n    })\r\n    this.setOffset(offset !== undefined ? offset : [0, 0])\r\n    this.setPositioning(positioning !== undefined ? positioning : 'center-center')\r\n\r\n    /**\r\n     * 地图交互\r\n     * @type {undefined}\r\n     */\r\n    this.mapDragPan = undefined\r\n\r\n    /**\r\n     * is click\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.isClick_ = false\r\n\r\n    /**\r\n     * 是否处于拖拽状态\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.dragging_ = false\r\n\r\n    /**\r\n     * 当前气泡是否获取焦点\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.isFocus_ = false\r\n\r\n    /**\r\n     * 当前配置信息\r\n     * @type {{}}\r\n     * @private\r\n     */\r\n    this.options_ = options\r\n\r\n    /**\r\n     * 当前气泡位置\r\n     * @type {Array}\r\n     * @private\r\n     */\r\n    this._position = (options['position'] && options['position'].length > 0) ? options['position'] : []\r\n\r\n    /**\r\n     * 防抖延时\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.handleTimer_ = null\r\n\r\n    /**\r\n     * 每次鼠标按下的位置\r\n     * @type {Array}\r\n     * @private\r\n     */\r\n    this.currentPixel_ = []\r\n\r\n    /**\r\n     * 创建text content\r\n     */\r\n    this.createTextContent(options)\r\n  }\r\n\r\n  /**\r\n   * 创建文本框父容器\r\n   * @param options\r\n   */\r\n  createTextContent (options) {\r\n    const _className = options.className || 'ol-plot-text-editor'\r\n    const content = document.createElement('textarea')\r\n    content.className = _className\r\n    content.style.width = options['width'] + 'px'\r\n    content.style.height = options['height'] + 'px'\r\n    content.style.minHeight = options['minHeight'] + 'px'\r\n    content.setAttribute('id', options['id'])\r\n    content.setAttribute('autofocus', true)\r\n    autosize(content)\r\n    on(content, 'focus', this.handleFocus_.bind(this))\r\n    on(content, 'blur', this.handleBlur_.bind(this))\r\n    on(content, 'click', this.handleClick_.bind(this))\r\n    on(content, 'mousedown', this.handleDragStart_.bind(this))\r\n    on(window, 'mouseup', this.handleDragEnd_.bind(this))\r\n    this.set('isPlotText', true)\r\n    this.setElement(content)\r\n    this.createCloseButton(options)\r\n    this.createResizeButton(options)\r\n    this.setPosition(this._position)\r\n    this.dispatchEvent('textBoxDrawEnd', {\r\n      overlay: this,\r\n      element: content,\r\n      uuid: options['id']\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取文本框\r\n   * @returns {string}\r\n   * @private\r\n   */\r\n  getTextAreaFromContent_ () {\r\n    let _node = ''\r\n    const childrens_ = Array.prototype.slice.call((this.element && this.element.children), 0)\r\n    if (childrens_.length > 0) {\r\n      childrens_.every(ele => {\r\n        if (ele.nodeType === 1 && ele.nodeName.toLowerCase() === 'textarea') {\r\n          _node = ele\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      })\r\n    }\r\n    return _node\r\n  }\r\n\r\n  /**\r\n   * 创建关闭按钮\r\n   * @param options\r\n   */\r\n  createCloseButton (options) {\r\n    const _closeSpan = document.createElement('span')\r\n    _closeSpan.className = 'ol-plot-text-editor-close'\r\n    _closeSpan.setAttribute('data-id', options['id'])\r\n    off(_closeSpan, 'click', this.closeCurrentPlotText.bind(this))\r\n    on(_closeSpan, 'click', this.closeCurrentPlotText.bind(this))\r\n    this.element.appendChild(_closeSpan)\r\n  }\r\n\r\n  /**\r\n   * 创建文本框大小调整按钮\r\n   * @param options\r\n   */\r\n  createResizeButton (options) {\r\n    const _resizeSpan = document.createElement('span')\r\n    _resizeSpan.className = 'ol-plot-text-editor-resize'\r\n    _resizeSpan.setAttribute('data-id', options['id'])\r\n    off(_resizeSpan, 'mousedown', this.handleResizeMouseDown_.bind(this))\r\n    off(_resizeSpan, 'mousemove', this.handleResizeMouseMove_.bind(this))\r\n    on(_resizeSpan, 'mousedown', this.handleResizeMouseDown_.bind(this))\r\n    on(_resizeSpan, 'mousemove', this.handleResizeMouseMove_.bind(this))\r\n    this.element.appendChild(_resizeSpan)\r\n  }\r\n\r\n  /**\r\n   * 调整大小\r\n   * @param event\r\n   * @private\r\n   */\r\n  resizeButtonMoveHandler_ (event) {\r\n    const pixel_ = event.pixel\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (pixel_.length < 1 || this.currentPixel_.length < 1 || !element_) return\r\n    const _offset = [pixel_[0] - this.currentPixel_[0], pixel_[1] - this.currentPixel_[1]]\r\n    const _size = [element_.offsetWidth, element_.offsetHeight]\r\n    const _width = _size[0] + _offset[0] * 2\r\n    const _height = _size[1] + _offset[1] * 2\r\n    setStyle(element_, 'width', _width + 'px')\r\n    setStyle(element_, 'height', _height + 'px')\r\n    this.currentPixel_ = pixel_\r\n    this.getMap().render()\r\n  }\r\n\r\n  /**\r\n   * 处理移动事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseMove_ (event) {\r\n    event.stopImmediatePropagation()\r\n  }\r\n\r\n  /**\r\n   * 处理鼠标按下事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseDown_ (event) {\r\n    if (!this.getMap()) return\r\n    this.currentPixel_ = [event.x, event.y]\r\n    this.getMap().on('pointermove', this.resizeButtonMoveHandler_, this)\r\n    on(this.getMap().getViewport(), 'mouseup', this.handleResizeMouseUp_.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 处理鼠标抬起事件，移除所有事件监听\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseUp_ (event) {\r\n    if (!this.getMap()) return\r\n    this.getMap().un('pointermove', this.resizeButtonMoveHandler_, this)\r\n    off(this.getMap().getViewport(), 'mouseup', this.handleResizeMouseUp_.bind(this))\r\n    this.currentPixel_ = []\r\n  }\r\n\r\n  /**\r\n   * 处理关闭事件\r\n   * @param event\r\n   */\r\n  closeCurrentPlotText (event) {\r\n    if (!this.getMap()) return\r\n    if (event && hasClass(event.target, 'ol-plot-text-editor-close')) {\r\n      let _id = event.target.getAttribute('data-id')\r\n      if (_id) {\r\n        const _overlay = this.getMap().getOverlayById(_id)\r\n        if (_overlay) {\r\n          this.getMap().removeOverlay(_overlay)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理获取焦点事件\r\n   * @private\r\n   */\r\n  handleFocus_ () {\r\n    this.isFocus_ = true\r\n    if (this.getMap()) {\r\n      this.getMap().set('activeTextArea', this)\r\n      this.getMap().dispatchEvent('activeTextArea')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理失去焦点事件\r\n   * @private\r\n   */\r\n  handleBlur_ () {\r\n    this.isFocus_ = false\r\n    if (this.getMap()) {\r\n      this.getMap().set('activeTextArea', null)\r\n      this.getMap().set('disActiveTextArea', this)\r\n      this.getMap().dispatchEvent('disActiveTextArea')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽开始\r\n   * @private\r\n   */\r\n  handleDragStart_ (event) {\r\n    if (!this.getMap()) return\r\n    if (!this.dragging_ && this.isMoveModel() && this.isFocus_) {\r\n      this.handleTimer_ = window.setTimeout(() => {\r\n        window.clearTimeout(this.handleTimer_)\r\n        this.handleTimer_ = null\r\n        if (!this.isClick_) {\r\n          this.dragging_ = true\r\n          this.disableMapDragPan()\r\n          this.preCursor_ = this.element.style.cursor\r\n          on(this.getMap().getViewport(), 'mousemove', this.handleDragDrag_.bind(this))\r\n          on(this.element, 'mouseup', this.handleDragEnd_.bind(this))\r\n        }\r\n      }, 300)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleDragDrag_ (event) {\r\n    if (this.dragging_) {\r\n      this.element.style.cursor = 'move'\r\n      this._position = this.getMap().getCoordinateFromPixel([event.clientX, event.clientY])\r\n      this.setPosition(this._position)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽\r\n   * @private\r\n   */\r\n  handleDragEnd_ (event) {\r\n    this.isClick_ = false\r\n    window.clearTimeout(this.handleTimer_)\r\n    this.handleTimer_ = null\r\n    if (this.dragging_ && this.isFocus_) {\r\n      this.dragging_ = false\r\n      this.enableMapDragPan()\r\n      this.element.style.cursor = this.preCursor_\r\n      off(this.getMap().getViewport(), 'mousemove', this.handleDragDrag_.bind(this))\r\n      off(this.element, 'mouseup', this.handleDragEnd_.bind(this))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理点击事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleClick_ (event) {\r\n    if (event.target === this.element) {\r\n      this.isClick_ = true\r\n    } else {\r\n      this.isClick_ = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 是否处于选择模式\r\n   * @returns {boolean}\r\n   */\r\n  isMoveModel () {\r\n    const range = window.getSelection().getRangeAt(0)\r\n    return range.collapsed\r\n  }\r\n\r\n  /**\r\n   * 设置样式\r\n   * @param style\r\n   */\r\n  setStyle (style = {}) {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      for (let key in style) {\r\n        if (style[key]) {\r\n          setStyle(_element, key, style[key])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前样式\r\n   * @returns {CSSStyleDeclaration}\r\n   */\r\n  getStyle () {\r\n    const _style = {}\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      for (let key in DEF_TEXT_STYEL) {\r\n        _style[key] = getStyle(_element, key)\r\n      }\r\n    }\r\n    return _style\r\n  }\r\n\r\n  /**\r\n   * set value\r\n   * @param value\r\n   */\r\n  setValue (value) {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      _element.value = value\r\n      if (value) {\r\n        autosize.update(_element)\r\n      }\r\n      this.getMap().render()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get value\r\n   * @returns {*}\r\n   */\r\n  getValue () {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      return _element.value\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取宽度\r\n   * @returns {number}\r\n   */\r\n  getWidth () {\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (element_ && element_.offsetWidth) {\r\n      return element_.offsetWidth\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取高度\r\n   * @returns {number}\r\n   */\r\n  getHeight () {\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (element_ && element_.offsetHeight) {\r\n      return element_.offsetHeight\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 激活地图的拖拽平移\r\n   */\r\n  enableMapDragPan () {\r\n    const _map = this.getMap()\r\n    if (!_map) return\r\n    if (this.mapDragPan && this.mapDragPan instanceof $DragPan) {\r\n      _map.addInteraction(this.mapDragPan)\r\n      delete this.mapDragPan\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 禁止地图的拖拽平移\r\n   */\r\n  disableMapDragPan () {\r\n    const _map = this.getMap()\r\n    if (!_map) return\r\n    let interactions = _map.getInteractions().getArray()\r\n    interactions.every(item => {\r\n      if (item instanceof $DragPan) {\r\n        this.mapDragPan = item\r\n        _map.removeInteraction(item)\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * set map\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    ol.Overlay.prototype.setMap.call(this, map)\r\n    if (map && map instanceof ol.Map) {\r\n      this.setStyle(merge(DEF_TEXT_STYEL, this.options_['style']))\r\n      this.setValue(this.options_['value'])\r\n    }\r\n  }\r\n}\r\n\r\nexport default PlotTextBox\r\n","/**\r\n * Created by FDD on 2017/5/20.\r\n */\r\nconst TEXTAREA = 'TextArea' // 文本标绘（特殊）\r\nconst ARC = 'Arc'\r\nconst CURVE = 'Curve'\r\nconst GATHERING_PLACE = 'GatheringPlace'\r\nconst POLYLINE = 'Polyline'\r\nconst FREEHANDLINE = 'FreeHandLine'\r\nconst POINT = 'Point'\r\nconst PENNANT = 'Pennant'\r\nconst RECTANGLE = 'RectAngle'\r\nconst CIRCLE = 'Circle'\r\nconst ELLIPSE = 'Ellipse'\r\nconst LUNE = 'Lune'\r\nconst SECTOR = 'Sector'\r\nconst CLOSED_CURVE = 'ClosedCurve'\r\nconst POLYGON = 'Polygon'\r\nconst FREE_POLYGON = 'FreePolygon'\r\nconst ATTACK_ARROW = 'AttackArrow'\r\nconst DOUBLE_ARROW = 'DoubleArrow'\r\nconst STRAIGHT_ARROW = 'StraightArrow'\r\nconst FINE_ARROW = 'FineArrow'\r\nconst ASSAULT_DIRECTION = 'AssaultDirection'\r\nconst TAILED_ATTACK_ARROW = 'TailedAttackArrow'\r\nconst SQUAD_COMBAT = 'SquadCombat'\r\nconst TAILED_SQUAD_COMBAT = 'TailedSquadCombat'\r\nconst RECTFLAG = 'RectFlag'\r\nconst TRIANGLEFLAG = 'TriangleFlag'\r\nconst CURVEFLAG = 'CurveFlag'\r\nexport {\r\n  TEXTAREA,\r\n  ARC,\r\n  CURVE,\r\n  GATHERING_PLACE,\r\n  POLYLINE,\r\n  FREEHANDLINE,\r\n  POINT,\r\n  PENNANT,\r\n  RECTANGLE,\r\n  CIRCLE,\r\n  ELLIPSE,\r\n  LUNE,\r\n  SECTOR,\r\n  CLOSED_CURVE,\r\n  POLYGON,\r\n  FREE_POLYGON,\r\n  ATTACK_ARROW,\r\n  DOUBLE_ARROW,\r\n  STRAIGHT_ARROW,\r\n  FINE_ARROW,\r\n  ASSAULT_DIRECTION,\r\n  TAILED_SQUAD_COMBAT,\r\n  TAILED_ATTACK_ARROW,\r\n  SQUAD_COMBAT,\r\n  RECTFLAG,\r\n  TRIANGLEFLAG,\r\n  CURVEFLAG\r\n}\r\n","/**\r\n * Created by FDD on 2017/5/15.\r\n * @desc 点要素\r\n */\r\nimport ol from 'openlayers'\r\nimport { POINT } from '../../Utils/PlotTypes'\r\nclass Point extends ol.geom.Point {\r\n  constructor (coordinates, point, params) {\r\n    super([])\r\n    this.type = POINT\r\n    this.options = params || {}\r\n    this.set('params', this.options)\r\n    this.fixPointCount = 1\r\n    if (point && point.length > 0) {\r\n      this.setPoints(point)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    let pnt = this.points[0]\r\n    this.setCoordinates(pnt)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Point\r\n","/**\r\n * Created by FDD on 2017/5/15.\r\n * @desc 点要素\r\n */\r\nimport ol from 'openlayers'\r\nimport {PENNANT} from '../../Utils/PlotTypes'\r\nclass Pennant extends ol.geom.Point {\r\n  constructor (coordinates, point, params) {\r\n    super([])\r\n    this.type = PENNANT\r\n    this.options = params || {}\r\n    this.set('params', this.options)\r\n    if (point && point.length > 0) {\r\n      this.setPoints(point)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Pennant\r\n","import ol from 'openlayers'\r\n\r\nimport {POLYLINE} from '../../Utils/PlotTypes'\r\nclass Polyline extends ol.geom.LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = POLYLINE\r\n    this.freehand = false\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Polyline\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画弓形算法，继承线要素相关方法和属性\r\n */\r\nimport ol from 'openlayers'\r\nimport {ARC} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Arc extends ol.geom.LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ARC\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) return\r\n    if (count === 2) {\r\n      this.setCoordinates(this.points)\r\n    } else {\r\n      let [pnt1, pnt2, pnt3, startAngle, endAngle] = [this.points[0], this.points[1], this.points[2], null, null]\r\n      let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3)\r\n      let radius = PlotUtils.MathDistance(pnt1, center)\r\n      let angle1 = PlotUtils.getAzimuth(pnt1, center)\r\n      let angle2 = PlotUtils.getAzimuth(pnt2, center)\r\n      if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n        startAngle = angle2\r\n        endAngle = angle1\r\n      } else {\r\n        startAngle = angle1\r\n        endAngle = angle2\r\n      }\r\n      this.setCoordinates(PlotUtils.getArcPoints(center, radius, startAngle, endAngle))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Arc\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画圆算法，继承面要素相关方法和属性\r\n */\r\nimport ol from 'openlayers'\r\nimport {CIRCLE} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Circle extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CIRCLE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      let center = this.points[0]\r\n      let radius = PlotUtils.MathDistance(center, this.points[1])\r\n      this.setCoordinates([this.generatePoints(center, radius)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对圆边线进行插值\r\n   * @param center\r\n   * @param radius\r\n   * @returns {null}\r\n   */\r\n  generatePoints (center, radius) {\r\n    let [x, y, angle, points] = [null, null, null, []]\r\n    for (let i = 0; i <= 100; i++) {\r\n      angle = Math.PI * 2 * i / 100\r\n      x = center[0] + radius * Math.cos(angle)\r\n      y = center[1] + radius * Math.sin(angle)\r\n      points.push([x, y])\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Circle\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘曲线算法\r\n */\r\nimport ol from 'openlayers'\r\nimport {CURVE} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Curve extends ol.geom.LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CURVE\r\n    this.t = 0.3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else if (count === 2) {\r\n      this.setCoordinates(this.points)\r\n    } else {\r\n      let points = PlotUtils.getCurvePoints(this.t, this.points)\r\n      this.setCoordinates(points)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Curve\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 自由线\r\n * @Inherits ol.geom.LineString\r\n */\r\nimport ol from 'openlayers'\r\nimport {FREEHANDLINE} from '../../Utils/PlotTypes'\r\nclass FreeHandLine extends ol.geom.LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FREEHANDLINE\r\n    this.freehand = true\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FreeHandLine\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 规则矩形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {RECTANGLE} from '../../Utils/PlotTypes'\r\nclass RectAngle extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = RECTANGLE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    this.isFill = ((params['isFill'] === false) ? params['isFill'] : true)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    if (this.points.length === 2) {\r\n      let coordinates = []\r\n      if (this.isFill) {\r\n        let extent = ol.extent.boundingExtent(this.points)\r\n        let polygon = ol.geom.Polygon.fromExtent(extent)\r\n        coordinates = polygon.getCoordinates()\r\n      } else {\r\n        let start = this.points[0]\r\n        let end = this.points[1]\r\n        coordinates = [start, [start[0], end[1]], end, [end[0], start[1]], start]\r\n      }\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default RectAngle\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画圆算法，继承面要素相关方法和属性\r\n */\r\nimport ol from 'openlayers'\r\n\r\nimport {ELLIPSE} from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Ellipse extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ELLIPSE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    if (this.getPointCount() < 2) {\r\n      return false\r\n    } else {\r\n      let [pnt1, pnt2] = [this.points[0], this.points[1]]\r\n      let center = PlotUtils.Mid(pnt1, pnt2)\r\n      let majorRadius = Math.abs((pnt1[0] - pnt2[0]) / 2)\r\n      let minorRadius = Math.abs((pnt1[1] - pnt2[1]) / 2)\r\n      let res = this.generatePoints(center, majorRadius, minorRadius)\r\n      this.setCoordinates([res])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对圆边线进行插值\r\n   * @param center\r\n   * @param majorRadius\r\n   * @param minorRadius\r\n   * @returns {*}\r\n   */\r\n  generatePoints (center, majorRadius, minorRadius) {\r\n    let [x, y, angle, points] = [null, null, null, []]\r\n    for (let i = 0; i <= Constants.FITTING_COUNT; i++) {\r\n      angle = Math.PI * 2 * i / Constants.FITTING_COUNT\r\n      x = center[0] + majorRadius * Math.cos(angle)\r\n      y = center[1] + minorRadius * Math.sin(angle)\r\n      points.push([x, y])\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Ellipse\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 弓形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {LUNE} from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Lune extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = LUNE\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    if (this.getPointCount() < 2) {\r\n      return false\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      if (this.getPointCount() === 2) {\r\n        let mid = PlotUtils.Mid(pnts[0], pnts[1])\r\n        let d = PlotUtils.MathDistance(pnts[0], mid)\r\n        let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d)\r\n        pnts.push(pnt)\r\n      }\r\n      let [pnt1, pnt2, pnt3, startAngle, endAngle] = [pnts[0], pnts[1], pnts[2], undefined, undefined]\r\n      let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3)\r\n      let radius = PlotUtils.MathDistance(pnt1, center)\r\n      let angle1 = PlotUtils.getAzimuth(pnt1, center)\r\n      let angle2 = PlotUtils.getAzimuth(pnt2, center)\r\n      if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n        startAngle = angle2\r\n        endAngle = angle1\r\n      } else {\r\n        startAngle = angle1\r\n        endAngle = angle2\r\n      }\r\n      pnts = PlotUtils.getArcPoints(center, radius, startAngle, endAngle)\r\n      pnts.push(pnts[0])\r\n      this.setCoordinates([pnts])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Lune\r\n","/**\r\n * Created by FDD on 2017/5/25.\r\n * @desc 扇形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {SECTOR} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Sector extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = SECTOR\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let points = this.getPointCount()\r\n    if (points < 2) {\r\n      return false\r\n    } else if (points === 2) {\r\n      this.setCoordinates([this.points])\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      let [center, pnt2, pnt3] = [pnts[0], pnts[1], pnts[2]]\r\n      let radius = PlotUtils.MathDistance(pnt2, center)\r\n      let startAngle = PlotUtils.getAzimuth(pnt2, center)\r\n      let endAngle = PlotUtils.getAzimuth(pnt3, center)\r\n      let pList = PlotUtils.getArcPoints(center, radius, startAngle, endAngle)\r\n      pList.push(center, pList[0])\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Sector\r\n","/**\r\n * Created by FDD on 2017/5/25.\r\n * @desc 闭合曲面\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {CLOSED_CURVE} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass ClosedCurve extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CLOSED_CURVE\r\n    this.t = 0.3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let points = this.getPointCount()\r\n    if (points < 2) {\r\n      return false\r\n    } else if (points === 2) {\r\n      this.setCoordinates([this.points])\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      pnts.push(pnts[0], pnts[1])\r\n      let [normals, pList] = [[], []]\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        let normalPoints = PlotUtils.getBisectorNormals(this.t, pnts[i], pnts[i + 1], pnts[i + 2])\r\n        normals = normals.concat(normalPoints)\r\n      }\r\n      let count = normals.length\r\n      normals = [normals[count - 1]].concat(normals.slice(0, count - 1))\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        let pnt1 = pnts[i]\r\n        let pnt2 = pnts[i + 1]\r\n        pList.push(pnt1)\r\n        for (let t = 0; t <= Constants.FITTING_COUNT; t++) {\r\n          let pnt = PlotUtils.getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n          pList.push(pnt)\r\n        }\r\n        pList.push(pnt2)\r\n      }\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default ClosedCurve\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 多边形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {POLYGON} from '../../Utils/PlotTypes'\r\nclass Polygon extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = POLYGON\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.points])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Polygon\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 自由面\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {FREE_POLYGON} from '../../Utils/PlotTypes'\r\nclass FreePolygon extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FREE_POLYGON\r\n    this.freehand = true\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates([this.points])\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FreePolygon\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 进攻方向\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {ATTACK_ARROW} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass AttackArrow extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ATTACK_ARROW\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.headTailFactor = 0.8\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let points = this.getPointCount()\r\n      if (points < 2) {\r\n        return false\r\n      } else if (points === 2) {\r\n        this.setCoordinates([this.points])\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [tailLeft, tailRight] = [pnts[0], pnts[1]]\r\n        if (PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])) {\r\n          tailLeft = pnts[1]\r\n          tailRight = pnts[0]\r\n        }\r\n        let midTail = PlotUtils.Mid(tailLeft, tailRight)\r\n        let bonePnts = [midTail].concat(pnts.slice(2))\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight)\r\n        let [neckLeft, neckRight] = [headPnts[0], headPnts[4]]\r\n        let tailWidthFactor = PlotUtils.MathDistance(tailLeft, tailRight) / PlotUtils.getBaseLength(bonePnts)\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值箭形上的点\r\n   * @param pnt1\r\n   * @param pnt2\r\n   * @param pnt3\r\n   * @param clockWise\r\n   * @returns {Array.<T>}\r\n   */\r\n  getArrowPoints (pnt1, pnt2, pnt3, clockWise) {\r\n    let midPnt = PlotUtils.Mid(pnt1, pnt2)\r\n    let len = PlotUtils.MathDistance(midPnt, pnt3)\r\n    let midPnt1 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.3, true)\r\n    let midPnt2 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.5, true)\r\n    midPnt1 = PlotUtils.getThirdPoint(midPnt, midPnt1, Constants.HALF_PI, len / 5, clockWise)\r\n    midPnt2 = PlotUtils.getThirdPoint(midPnt, midPnt2, Constants.HALF_PI, len / 4, clockWise)\r\n    let points = [midPnt, midPnt1, midPnt2, pnt3]\r\n    let arrowPnts = this.getArrowHeadPoints(points)\r\n    if (arrowPnts && Array.isArray(arrowPnts) && arrowPnts.length > 0) {\r\n      let [neckLeftPoint, neckRightPoint] = [arrowPnts[0], arrowPnts[4]]\r\n      let tailWidthFactor = PlotUtils.MathDistance(pnt1, pnt2) / PlotUtils.getBaseLength(points) / 2\r\n      let bodyPnts = this.getArrowBodyPoints(points, neckLeftPoint, neckRightPoint, tailWidthFactor)\r\n      if (bodyPnts) {\r\n        let n = bodyPnts.length\r\n        let lPoints = bodyPnts.slice(0, n / 2)\r\n        let rPoints = bodyPnts.slice(n / 2, n)\r\n        lPoints.push(neckLeftPoint)\r\n        rPoints.push(neckRightPoint)\r\n        lPoints = lPoints.reverse()\r\n        lPoints.push(pnt2)\r\n        rPoints = rPoints.reverse()\r\n        rPoints.push(pnt1)\r\n        return (lPoints.reverse().concat(arrowPnts, rPoints))\r\n      }\r\n    } else {\r\n      throw new Error('插值出错')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值头部点\r\n   * @param points\r\n   * @returns {[*,*,*,*,*]}\r\n   */\r\n  getArrowHeadPoints (points, tailLeft, tailRight) {\r\n    try {\r\n      let len = PlotUtils.getBaseLength(points)\r\n      let headHeight = len * this.headHeightFactor\r\n      let headPnt = points[points.length - 1]\r\n      len = PlotUtils.MathDistance(headPnt, points[points.length - 2])\r\n      let tailWidth = PlotUtils.MathDistance(tailLeft, tailRight)\r\n      if (headHeight > tailWidth * this.headTailFactor) {\r\n        headHeight = tailWidth * this.headTailFactor\r\n      }\r\n      let headWidth = headHeight * this.headWidthFactor\r\n      let neckWidth = headHeight * this.neckWidthFactor\r\n      headHeight = headHeight > len ? len : headHeight\r\n      let neckHeight = headHeight * this.neckHeightFactor\r\n      let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true)\r\n      let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true)\r\n      let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false)\r\n      let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true)\r\n      let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false)\r\n      let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true)\r\n      return [neckLeft, headLeft, headPnt, headRight, neckRight]\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值面部分数据\r\n   * @param points\r\n   * @param neckLeft\r\n   * @param neckRight\r\n   * @param tailWidthFactor\r\n   * @returns {Array.<*>}\r\n   */\r\n  getArrowBodyPoints (points, neckLeft, neckRight, tailWidthFactor) {\r\n    let allLen = PlotUtils.wholeDistance(points)\r\n    let len = PlotUtils.getBaseLength(points)\r\n    let tailWidth = len * tailWidthFactor\r\n    let neckWidth = PlotUtils.MathDistance(neckLeft, neckRight)\r\n    let widthDif = (tailWidth - neckWidth) / 2\r\n    let [tempLen, leftBodyPnts, rightBodyPnts] = [0, [], []]\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n      let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2\r\n      tempLen += PlotUtils.MathDistance(points[i - 1], points[i])\r\n      let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle)\r\n      let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true)\r\n      let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false)\r\n      leftBodyPnts.push(left)\r\n      rightBodyPnts.push(right)\r\n    }\r\n    return leftBodyPnts.concat(rightBodyPnts)\r\n  }\r\n\r\n  /**\r\n   * 获取对称点\r\n   * @param linePnt1\r\n   * @param linePnt2\r\n   * @param point\r\n   * @returns {*}\r\n   */\r\n  getTempPoint4 (linePnt1, linePnt2, point) {\r\n    try {\r\n      let midPnt = PlotUtils.Mid(linePnt1, linePnt2)\r\n      let len = PlotUtils.MathDistance(midPnt, point)\r\n      let angle = PlotUtils.getAngleOfThreePoints(linePnt1, midPnt, point)\r\n      let [symPnt, distance1, distance2, mid] = [undefined, undefined, undefined, undefined]\r\n      if (angle < Constants.HALF_PI) {\r\n        distance1 = len * Math.sin(angle)\r\n        distance2 = len * Math.cos(angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else if (angle >= Constants.HALF_PI && angle < Math.PI) {\r\n        distance1 = len * Math.sin(Math.PI - angle)\r\n        distance2 = len * Math.cos(Math.PI - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      } else if (angle >= Math.PI && angle < Math.PI * 1.5) {\r\n        distance1 = len * Math.sin(angle - Math.PI)\r\n        distance2 = len * Math.cos(angle - Math.PI)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else {\r\n        distance1 = len * Math.sin(Math.PI * 2 - angle)\r\n        distance2 = len * Math.cos(Math.PI * 2 - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      }\r\n      return symPnt\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default AttackArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 双箭头\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {DOUBLE_ARROW} from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass DoubleArrow extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = DOUBLE_ARROW\r\n    this.headHeightFactor = 0.25\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.connPoint = null\r\n    this.tempPoint4 = null\r\n    this.fixPointCount = 4\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else if (count === 2) {\r\n        this.setCoordinates([this.points])\r\n        return false\r\n      }\r\n      if (count > 2) {\r\n        let [pnt1, pnt2, pnt3] = [this.points[0], this.points[1], this.points[2]]\r\n        if (count === 3) {\r\n          this.tempPoint4 = this.getTempPoint4(pnt1, pnt2, pnt3)\r\n          this.connPoint = PlotUtils.Mid(pnt1, pnt2)\r\n        } else if (count === 4) {\r\n          this.tempPoint4 = this.points[3]\r\n          this.connPoint = PlotUtils.Mid(pnt1, pnt2)\r\n        } else {\r\n          this.tempPoint4 = this.points[3]\r\n          this.connPoint = this.points[4]\r\n        }\r\n        let [leftArrowPnts, rightArrowPnts] = [undefined, undefined]\r\n        if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n          leftArrowPnts = this.getArrowPoints(pnt1, this.connPoint, this.tempPoint4, false)\r\n          rightArrowPnts = this.getArrowPoints(this.connPoint, pnt2, pnt3, true)\r\n        } else {\r\n          leftArrowPnts = this.getArrowPoints(pnt2, this.connPoint, pnt3, false)\r\n          rightArrowPnts = this.getArrowPoints(this.connPoint, pnt1, this.tempPoint4, true)\r\n        }\r\n        let m = leftArrowPnts.length\r\n        let t = (m - 5) / 2\r\n        let llBodyPnts = leftArrowPnts.slice(0, t)\r\n        let lArrowPnts = leftArrowPnts.slice(t, t + 5)\r\n        let lrBodyPnts = leftArrowPnts.slice(t + 5, m)\r\n        let rlBodyPnts = rightArrowPnts.slice(0, t)\r\n        let rArrowPnts = rightArrowPnts.slice(t, t + 5)\r\n        let rrBodyPnts = rightArrowPnts.slice(t + 5, m)\r\n        rlBodyPnts = PlotUtils.getBezierPoints(rlBodyPnts)\r\n        let bodyPnts = PlotUtils.getBezierPoints(rrBodyPnts.concat(llBodyPnts.slice(1)))\r\n        lrBodyPnts = PlotUtils.getBezierPoints(lrBodyPnts)\r\n        let pnts = rlBodyPnts.concat(rArrowPnts, bodyPnts, lArrowPnts, lrBodyPnts)\r\n        this.setCoordinates([pnts])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值箭形上的点\r\n   * @param pnt1\r\n   * @param pnt2\r\n   * @param pnt3\r\n   * @param clockWise\r\n   * @returns {Array.<T>}\r\n   */\r\n  getArrowPoints (pnt1, pnt2, pnt3, clockWise) {\r\n    let midPnt = PlotUtils.Mid(pnt1, pnt2)\r\n    let len = PlotUtils.MathDistance(midPnt, pnt3)\r\n    let midPnt1 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.3, true)\r\n    let midPnt2 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.5, true)\r\n    midPnt1 = PlotUtils.getThirdPoint(midPnt, midPnt1, Constants.HALF_PI, len / 5, clockWise)\r\n    midPnt2 = PlotUtils.getThirdPoint(midPnt, midPnt2, Constants.HALF_PI, len / 4, clockWise)\r\n    let points = [midPnt, midPnt1, midPnt2, pnt3]\r\n    let arrowPnts = this.getArrowHeadPoints(points)\r\n    if (arrowPnts && Array.isArray(arrowPnts) && arrowPnts.length > 0) {\r\n      let [neckLeftPoint, neckRightPoint] = [arrowPnts[0], arrowPnts[4]]\r\n      let tailWidthFactor = PlotUtils.MathDistance(pnt1, pnt2) / PlotUtils.getBaseLength(points) / 2\r\n      let bodyPnts = this.getArrowBodyPoints(points, neckLeftPoint, neckRightPoint, tailWidthFactor)\r\n      if (bodyPnts) {\r\n        let n = bodyPnts.length\r\n        let lPoints = bodyPnts.slice(0, n / 2)\r\n        let rPoints = bodyPnts.slice(n / 2, n)\r\n        lPoints.push(neckLeftPoint)\r\n        rPoints.push(neckRightPoint)\r\n        lPoints = lPoints.reverse()\r\n        lPoints.push(pnt2)\r\n        rPoints = rPoints.reverse()\r\n        rPoints.push(pnt1)\r\n        return (lPoints.reverse().concat(arrowPnts, rPoints))\r\n      }\r\n    } else {\r\n      throw new Error('插值出错')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值头部点\r\n   * @param points\r\n   * @returns {[*,*,*,*,*]}\r\n   */\r\n  getArrowHeadPoints (points) {\r\n    try {\r\n      let len = PlotUtils.getBaseLength(points)\r\n      let headHeight = len * this.headHeightFactor\r\n      let headPnt = points[points.length - 1]\r\n      let headWidth = headHeight * this.headWidthFactor\r\n      let neckWidth = headHeight * this.neckWidthFactor\r\n      let neckHeight = headHeight * this.neckHeightFactor\r\n      let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true)\r\n      let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true)\r\n      let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false)\r\n      let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true)\r\n      let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false)\r\n      let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true)\r\n      return [neckLeft, headLeft, headPnt, headRight, neckRight]\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值面部分数据\r\n   * @param points\r\n   * @param neckLeft\r\n   * @param neckRight\r\n   * @param tailWidthFactor\r\n   * @returns {Array.<*>}\r\n   */\r\n  getArrowBodyPoints (points, neckLeft, neckRight, tailWidthFactor) {\r\n    let allLen = PlotUtils.wholeDistance(points)\r\n    let len = PlotUtils.getBaseLength(points)\r\n    let tailWidth = len * tailWidthFactor\r\n    let neckWidth = PlotUtils.MathDistance(neckLeft, neckRight)\r\n    let widthDif = (tailWidth - neckWidth) / 2\r\n    let [tempLen, leftBodyPnts, rightBodyPnts] = [0, [], []]\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n      let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2\r\n      tempLen += PlotUtils.MathDistance(points[i - 1], points[i])\r\n      let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle)\r\n      let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true)\r\n      let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false)\r\n      leftBodyPnts.push(left)\r\n      rightBodyPnts.push(right)\r\n    }\r\n    return leftBodyPnts.concat(rightBodyPnts)\r\n  }\r\n\r\n  /**\r\n   * 获取对称点\r\n   * @param linePnt1\r\n   * @param linePnt2\r\n   * @param point\r\n   * @returns {*}\r\n   */\r\n  getTempPoint4 (linePnt1, linePnt2, point) {\r\n    try {\r\n      let midPnt = PlotUtils.Mid(linePnt1, linePnt2)\r\n      let len = PlotUtils.MathDistance(midPnt, point)\r\n      let angle = PlotUtils.getAngleOfThreePoints(linePnt1, midPnt, point)\r\n      let [symPnt, distance1, distance2, mid] = [undefined, undefined, undefined, undefined]\r\n      if (angle < Constants.HALF_PI) {\r\n        distance1 = len * Math.sin(angle)\r\n        distance2 = len * Math.cos(angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else if (angle >= Constants.HALF_PI && angle < Math.PI) {\r\n        distance1 = len * Math.sin(Math.PI - angle)\r\n        distance2 = len * Math.cos(Math.PI - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      } else if (angle >= Math.PI && angle < Math.PI * 1.5) {\r\n        distance1 = len * Math.sin(angle - Math.PI)\r\n        distance2 = len * Math.cos(angle - Math.PI)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else {\r\n        distance1 = len * Math.sin(Math.PI * 2 - angle)\r\n        distance2 = len * Math.cos(Math.PI * 2 - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      }\r\n      return symPnt\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n    if (this.getPointCount() === 3 && this.tempPoint4 !== null) {\r\n      this.points.push(this.tempPoint4)\r\n    }\r\n    if (this.connPoint !== null) {\r\n      this.points.push(this.connPoint)\r\n    }\r\n  }\r\n}\r\n\r\nexport default DoubleArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 细直箭头\r\n */\r\nimport ol from 'openlayers'\r\nimport {STRAIGHT_ARROW} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass StraightArrow extends ol.geom.LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = STRAIGHT_ARROW\r\n    this.fixPointCount = 2\r\n    this.maxArrowLength = 3000000\r\n    this.arrowLengthScale = 5\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [pnt1, pnt2] = [pnts[0], pnts[1]]\r\n        let distance = PlotUtils.MathDistance(pnt1, pnt2)\r\n        let len = distance / this.arrowLengthScale\r\n        len = ((len > this.maxArrowLength) ? this.maxArrowLength : len)\r\n        let leftPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI / 6, len, false)\r\n        let rightPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI / 6, len, true)\r\n        this.setCoordinates([pnt1, pnt2, leftPnt, pnt2, rightPnt])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default StraightArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 粗单尖头箭头\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {FINE_ARROW} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass FineArrow extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FINE_ARROW\r\n    this.tailWidthFactor = 0.1\r\n    this.neckWidthFactor = 0.2\r\n    this.headWidthFactor = 0.25\r\n    this.headAngle = Math.PI / 8.5\r\n    this.neckAngle = Math.PI / 13\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let cont = this.getPointCount()\r\n      if (cont < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [pnt1, pnt2] = [pnts[0], pnts[1]]\r\n        let len = PlotUtils.getBaseLength(pnts)\r\n        let tailWidth = len * this.tailWidthFactor\r\n        let neckWidth = len * this.neckWidthFactor\r\n        let headWidth = len * this.headWidthFactor\r\n        let tailLeft = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, true)\r\n        let tailRight = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, false)\r\n        let headLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, false)\r\n        let headRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, true)\r\n        let neckLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, false)\r\n        let neckRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, true)\r\n        let pList = [tailLeft, neckLeft, headLeft, pnt2, headRight, neckRight, tailRight]\r\n        this.setCoordinates([pList])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FineArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 粗单直箭头\r\n * @Inherits FineArrow\r\n */\r\nimport FineArrow from './FineArrow'\r\nimport {ASSAULT_DIRECTION} from '../../Utils/PlotTypes'\r\nclass AssaultDirection extends FineArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.tailWidthFactor = 0.05\r\n    this.neckWidthFactor = 0.1\r\n    this.headWidthFactor = 0.15\r\n    this.type = ASSAULT_DIRECTION\r\n    this.headAngle = Math.PI / 4\r\n    this.neckAngle = Math.PI * 0.17741\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n    this.set('params', params)\r\n  }\r\n}\r\n\r\nexport default AssaultDirection\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 进攻方向（尾）\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport {TAILED_ATTACK_ARROW} from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass TailedAttackArrow extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = TAILED_ATTACK_ARROW\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.headTailFactor = 0.8\r\n    this.swallowTailFactor = 1\r\n    this.swallowTailPnt = null\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let points = this.getPointCount()\r\n      if (points < 2) {\r\n        return false\r\n      } else if (points === 2) {\r\n        this.setCoordinates([this.points])\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [tailLeft, tailRight] = [pnts[0], pnts[1]]\r\n        if (PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])) {\r\n          tailLeft = pnts[1]\r\n          tailRight = pnts[0]\r\n        }\r\n        let midTail = PlotUtils.Mid(tailLeft, tailRight)\r\n        let bonePnts = [midTail].concat(pnts.slice(2))\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight)\r\n        let [neckLeft, neckRight] = [headPnts[0], headPnts[4]]\r\n        let tailWidth = PlotUtils.MathDistance(tailLeft, tailRight)\r\n        let allLen = PlotUtils.getBaseLength(bonePnts)\r\n        let len = allLen * this.tailWidthFactor * this.swallowTailFactor\r\n        this.swallowTailPnt = PlotUtils.getThirdPoint(bonePnts[1], bonePnts[0], 0, len, true)\r\n        let factor = tailWidth / allLen\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, factor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [this.swallowTailPnt, leftPnts[0]])])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n}\r\n\r\nexport default TailedAttackArrow\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 分队战斗行动\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport {SQUAD_COMBAT} from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass SquadCombat extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = SQUAD_COMBAT\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let tailPnts = this.getTailPoints(pnts)\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[1])\r\n        let neckLeft = headPnts[0]\r\n        let neckRight = headPnts[4]\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailPnts[1]].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  getTailPoints (points) {\r\n    let allLen = PlotUtils.getBaseLength(points)\r\n    let tailWidth = allLen * this.tailWidthFactor\r\n    let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false)\r\n    let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true)\r\n    return ([tailLeft, tailRight])\r\n  }\r\n}\r\n\r\nexport default SquadCombat\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 分队战斗行动（尾）\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport {TAILED_SQUAD_COMBAT} from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass TailedSquadCombat extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = TAILED_SQUAD_COMBAT\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.swallowTailFactor = 1\r\n    this.swallowTailPnt = null\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let tailPnts = this.getTailPoints(pnts)\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[2])\r\n        let neckLeft = headPnts[0]\r\n        let neckRight = headPnts[4]\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailPnts[2]].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [tailPnts[1], leftPnts[0]])])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  getTailPoints (points) {\r\n    let allLen = PlotUtils.getBaseLength(points)\r\n    let tailWidth = allLen * this.tailWidthFactor\r\n    let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false)\r\n    let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true)\r\n    let len = tailWidth * this.swallowTailFactor\r\n    let swallowTailPnt = PlotUtils.getThirdPoint(points[1], points[0], 0, len, true)\r\n    return ([tailLeft, swallowTailPnt, tailRight])\r\n  }\r\n}\r\n\r\nexport default TailedSquadCombat\r\n","/**\r\n * Created by FDD on 2017/5/27.\r\n * @desc 集结地\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport ol from 'openlayers'\r\nimport {GATHERING_PLACE} from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass GatheringPlace extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = GATHERING_PLACE\r\n    this.t = 0.4\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let pnts = this.getPoints()\r\n    let points = this.getPointCount()\r\n    if (pnts.length < 2) {\r\n      return false\r\n    } else {\r\n      if (points === 2) {\r\n        let mid = PlotUtils.Mid(pnts[0], pnts[1])\r\n        let d = PlotUtils.MathDistance(pnts[0], mid) / 0.9\r\n        let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d, true)\r\n        pnts = [pnts[0], pnt, pnts[1]]\r\n      }\r\n      let mid = PlotUtils.Mid(pnts[0], pnts[2])\r\n      pnts.push(mid, pnts[0], pnts[1])\r\n      let [normals, pnt1, pnt2, pnt3, pList] = [[], undefined, undefined, undefined, []]\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        pnt1 = pnts[i]\r\n        pnt2 = pnts[i + 1]\r\n        pnt3 = pnts[i + 2]\r\n        let normalPoints = PlotUtils.getBisectorNormals(this.t, pnt1, pnt2, pnt3)\r\n        normals = normals.concat(normalPoints)\r\n      }\r\n      let count = normals.length\r\n      normals = [normals[count - 1]].concat(normals.slice(0, count - 1))\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        pnt1 = pnts[i]\r\n        pnt2 = pnts[i + 1]\r\n        pList.push(pnt1)\r\n        for (let t = 0; t <= Constants.FITTING_COUNT; t++) {\r\n          let pnt = PlotUtils.getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n          pList.push(pnt)\r\n        }\r\n        pList.push(pnt2)\r\n      }\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default GatheringPlace\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 直角旗标（使用两个控制点直接创建直角旗标）\r\n */\r\nimport ol from 'openlayers'\r\nimport {RECTFLAG} from '../../Utils/PlotTypes'\r\nclass RectFlag extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = RECTFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      var point1 = [endPoint[0], startPoint[1]]\r\n      var point2 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point3 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point4 = [startPoint[0], endPoint[1]]\r\n      components = [startPoint, point1, point2, point3, point4]\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default RectFlag\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 三角旗标（使用两个控制点直接创建三角旗标）\r\n */\r\nimport ol from 'openlayers'\r\n\r\nimport {TRIANGLEFLAG} from '../../Utils/PlotTypes'\r\nclass TriangleFlag extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = TRIANGLEFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      var point1 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point2 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point3 = [startPoint[0], endPoint[1]]\r\n      components = [startPoint, point1, point2, point3]\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default TriangleFlag\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 曲线旗标\r\n */\r\nimport ol from 'openlayers'\r\nimport {CURVEFLAG} from '../../Utils/PlotTypes'\r\nimport {getBezierPoints} from '../../Utils/utils'\r\nclass CurveFlag extends ol.geom.Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CURVEFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      // 上曲线起始点\r\n      let point1 = startPoint\r\n      // 上曲线第一控制点\r\n      let point2 = [(endPoint[0] - startPoint[0]) / 4 + startPoint[0], (endPoint[1] - startPoint[1]) / 8 + startPoint[1]]\r\n      // 上曲线第二个点\r\n      let point3 = [(startPoint[0] + endPoint[0]) / 2, startPoint[1]]\r\n      // 上曲线第二控制点\r\n      let point4 = [(endPoint[0] - startPoint[0]) * 3 / 4 + startPoint[0], -(endPoint[1] - startPoint[1]) / 8 + startPoint[1]]\r\n      // 上曲线结束点\r\n      let point5 = [endPoint[0], startPoint[1]]\r\n      // 下曲线结束点\r\n      let point6 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      // 下曲线第二控制点\r\n      let point7 = [(endPoint[0] - startPoint[0]) * 3 / 4 + startPoint[0], (endPoint[1] - startPoint[1]) * 3 / 8 + startPoint[1]]\r\n      // 下曲线第二个点\r\n      let point8 = [(startPoint[0] + endPoint[0]) / 2, (startPoint[1] + endPoint[1]) / 2]\r\n      // 下曲线第一控制点\r\n      let point9 = [(endPoint[0] - startPoint[0]) / 4 + startPoint[0], (endPoint[1] - startPoint[1]) * 5 / 8 + startPoint[1]]\r\n      // 下曲线起始点\r\n      let point10 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      // 旗杆底部点\r\n      let point11 = [startPoint[0], endPoint[1]]\r\n      // 计算上曲线\r\n      let curve1 = getBezierPoints([point1, point2, point3, point4, point5])\r\n      // 计算下曲线\r\n      let curve2 = getBezierPoints([point6, point7, point8, point9, point10])\r\n      // 合并\r\n      components = curve1.concat(curve2)\r\n      components.push(point11)\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default CurveFlag\r\n","/**\n * Created by FDD on 2017/5/15.\n * @desc PlotDraw\n */\nimport ol from 'openlayers'\nimport Observable from 'observable-emit'\nimport {getuuid, MathDistance} from '../Utils/utils'\nimport { BASE_LAYERNAME } from '../Constants'\nimport { createVectorLayer } from '../Utils/layerUtils'\nimport PlotTextBox from '../Geometry/Text/PlotTextBox'\nimport * as Plots from '../Geometry/index'\nimport * as PlotTypes from '../Utils/PlotTypes'\nconst $DrawInteraction = ol.interaction.Draw\nconst $Style = ol.style.Style\nconst $Icon = ol.style.Icon\nconst $Stroke = ol.style.Stroke\nconst $Fill = ol.style.Fill\nclass PlotDraw extends Observable {\n  constructor (map, params) {\n    super()\n    if (map && map instanceof ol.Map) {\n      this.map = map\n    } else {\n      throw new Error('传入的不是地图对象！')\n    }\n    this.options = params || {}\n    /**\n     * 交互点\n     * @type {null}\n     */\n    this.points = null\n    /**\n     * 当前标绘工具\n     * @type {null}\n     */\n    this.plot = null\n    /**\n     * 当前要素\n     * @type {null}\n     */\n    this.feature = null\n    /**\n     * 标绘类型\n     * @type {null}\n     */\n    this.plotType = null\n    /**\n     * 当前标绘参数\n     * @type {null}\n     */\n    this.plotParams = null\n    /**\n     * 当前地图视图\n     * @type {Element}\n     */\n    this.mapViewport = this.map.getViewport()\n    /**\n     * 地图双击交互\n     * @type {null}\n     */\n    this.dblClickZoomInteraction = null\n\n    /**\n     * draw交互工具\n     * @type {null}\n     * @private\n     */\n    this.drawInteraction_ = null\n\n    /**\n     * 创建图层名称\n     * @type {string}\n     */\n    this.layerName = ((this.options && this.options['layerName']) ? this.options['layerName'] : BASE_LAYERNAME)\n\n    /**\n     * 当前矢量图层\n     * @type {*}\n     */\n    this.drawLayer = createVectorLayer(this.map, this.layerName, {\n      create: true\n    })\n    this.drawLayer.setZIndex(this.options['zIndex'] || 99)\n  }\n\n  /**\n   * 创建Plot\n   * @param type\n   * @param points\n   * @param _params\n   * @returns {*}\n   */\n  createPlot (type, points, _params) {\n    let params = _params || {}\n    switch (type) {\n      case PlotTypes.TEXTAREA:\n        return 'TextArea'\n      case PlotTypes.POINT:\n        return new Plots.Point([], points, params)\n      case PlotTypes.PENNANT:\n        return new Plots.Pennant([], points, params)\n      case PlotTypes.POLYLINE:\n        return new Plots.Polyline([], points, params)\n      case PlotTypes.ARC:\n        return new Plots.Arc([], points, params)\n      case PlotTypes.CIRCLE:\n        return new Plots.Circle([], points, params)\n      case PlotTypes.CURVE:\n        return new Plots.Curve([], points, params)\n      case PlotTypes.FREEHANDLINE:\n        return new Plots.FreeHandLine([], points, params)\n      case PlotTypes.RECTANGLE:\n        return new Plots.RectAngle([], points, params)\n      case PlotTypes.ELLIPSE:\n        return new Plots.Ellipse([], points, params)\n      case PlotTypes.LUNE:\n        return new Plots.Lune([], points, params)\n      case PlotTypes.SECTOR:\n        return new Plots.Sector([], points, params)\n      case PlotTypes.CLOSED_CURVE:\n        return new Plots.ClosedCurve([], points, params)\n      case PlotTypes.POLYGON:\n        return new Plots.Polygon([], points, params)\n      case PlotTypes.ATTACK_ARROW:\n        return new Plots.AttackArrow([], points, params)\n      case PlotTypes.FREE_POLYGON:\n        return new Plots.FreePolygon([], points, params)\n      case PlotTypes.DOUBLE_ARROW:\n        return new Plots.DoubleArrow([], points, params)\n      case PlotTypes.STRAIGHT_ARROW:\n        return new Plots.StraightArrow([], points, params)\n      case PlotTypes.FINE_ARROW:\n        return new Plots.FineArrow([], points, params)\n      case PlotTypes.ASSAULT_DIRECTION:\n        return new Plots.AssaultDirection([], points, params)\n      case PlotTypes.TAILED_ATTACK_ARROW:\n        return new Plots.TailedAttackArrow([], points, params)\n      case PlotTypes.SQUAD_COMBAT:\n        return new Plots.SquadCombat([], points, params)\n      case PlotTypes.TAILED_SQUAD_COMBAT:\n        return new Plots.TailedSquadCombat([], points, params)\n      case PlotTypes.GATHERING_PLACE:\n        return new Plots.GatheringPlace([], points, params)\n      case PlotTypes.RECTFLAG:\n        return new Plots.RectFlag([], points, params)\n      case PlotTypes.TRIANGLEFLAG:\n        return new Plots.TriangleFlag([], points, params)\n      case PlotTypes.CURVEFLAG:\n        return new Plots.CurveFlag([], points, params)\n    }\n    return null\n  }\n\n  /**\n   * 激活工具\n   * @param type\n   * @param params\n   */\n  active (type, params = {}) {\n    this.disActive()\n    this.deactiveMapTools()\n    this.plotType = type\n    this.plotParams = params\n    if (type === PlotTypes.TEXTAREA) {\n      this.activeInteraction()\n    } else if (Object.keys(PlotTypes).some(key => (PlotTypes[key] === type))) {\n      this.map.on('click', this.mapFirstClickHandler, this)\n    } else {\n      console.warn('不存在的标绘类型！')\n    }\n  }\n\n  /**\n   * 激活交互工具\n   */\n  activeInteraction () {\n    this.drawInteraction_ = new $DrawInteraction({\n      style: new $Style({\n        fill: new $Fill({\n          color: 'rgba(255, 255, 255, 0.7)'\n        }),\n        stroke: new $Stroke({\n          color: 'rgba(0, 0, 0, 0.15)',\n          width: 2\n        }),\n        image: new $Icon({\n          anchor: [1, 1],\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'fraction',\n          opacity: 0.75,\n          src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4T41T0W3CQAy1lfwRqR0h/CE5UhkBJmiZADpB0wlKJwA2aDegE5QR+Igl/noj9OPuLydXPuXQEYUKS5FyPvvd87ONRDRFxEdr7c4Y8ws3WFmW90VRvIjIF1ZVtQaANxH59N6v8zwvRaQEgCMATDu88I+Ipm1bk2XZHhEfAOAdFW00Gh2YOQafOeidHoaYEdGHc65GDZhMJuXpdDJ99hqkPmZe9e9iTgCoqmrWNM0hDerq/FGftXbcZxFzAgARrZg5vBaNiGpE3OhZRF6Zedu7DzkRYMrMKlQKYBBRQVVgw8zj3n3IGWSg9ESkds6tiqJQbe4AYJ6WGVkPAqh4+romdP9LbXMqZh/gXIKqm+d5EK9vbduOY7d0AAdL6AYLmqbRAQtGRMc4ONF/wSC2RF/PsuwbABapqLEjKqb3fq4sLtoYh6Lbiydr7TbtuwYDgH5qB9XmPEjdKG+Y+Xmo7ms+Lcs5N0uX6ei9X9y4TGtEXIZlukb7PzbdmNcisv8DtQILak2vZsYAAAAASUVORK5CYII='\n        })\n      }),\n      type: 'Circle',\n      geometryFunction: $DrawInteraction.createBox()\n    })\n    this.map.addInteraction(this.drawInteraction_)\n    this.drawInteraction_.on('drawend', this.textAreaDrawEnd, this)\n  }\n\n  /**\n   * 绘制结束\n   * @param event\n   */\n  textAreaDrawEnd (event) {\n    if (event && event.feature) {\n      this.map.removeInteraction(this.drawInteraction_)\n      const extent = event.feature.getGeometry().getExtent()\n      const _center = [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\n      const topLeft = this.map.getPixelFromCoordinate([extent[0], extent[1]])\n      const bottomRight = this.map.getPixelFromCoordinate([extent[2], extent[3]])\n      const [_width, _height] = [Math.abs(topLeft[0] - bottomRight[0]), Math.abs(topLeft[1] - bottomRight[1])]\n      const _plotText = new PlotTextBox({\n        id: getuuid(),\n        position: _center,\n        value: '',\n        width: _width,\n        height: _height,\n        style: {\n          width: _width + 'px',\n          height: _height + 'px'\n        }\n      })\n      if (this.map && this.map instanceof ol.Map && _plotText) {\n        this.map.addOverlay(_plotText)\n      } else {\n        console.warn('未传入地图对象或者plotText创建失败！')\n      }\n    } else {\n      console.info('未获取到要素！')\n    }\n  }\n\n  /**\n   * 取消激活状态\n   */\n  disActive () {\n    this.removeEventHandlers()\n    if (this.drawInteraction_) {\n      this.map.removeInteraction(this.drawInteraction_)\n      this.drawInteraction_ = null\n    }\n    this.points = []\n    this.plot = null\n    this.feature = null\n    this.plotType = null\n    this.plotParams = null\n    this.activateMapTools()\n  }\n\n  /**\n   * PLOT是否处于激活状态\n   * @returns {boolean}\n   */\n  isDrawing () {\n    return !!this.plotType\n  }\n\n  /**\n   * 地图事件处理\n   * 激活工具后第一次点击事件\n   * @param event\n   */\n  mapFirstClickHandler (event) {\n    this.map.un('click', this.mapFirstClickHandler, this)\n    this.points.push(event.coordinate)\n    this.plot = this.createPlot(this.plotType, this.points, this.plotParams)\n    this.feature = new ol.Feature(this.plot)\n    this.feature.set('isPlot', true)\n    this.drawLayer.getSource().addFeature(this.feature)\n    if (this.plotType === PlotTypes.POINT || this.plotType === PlotTypes.PENNANT) {\n      this.plot.finishDrawing()\n      this.drawEnd(event)\n    } else {\n      this.map.on('click', this.mapNextClickHandler, this)\n      if (!this.plot.freehand) {\n        this.map.on('dblclick', this.mapDoubleClickHandler, this)\n      }\n      this.map.un('pointermove', this.mapMouseMoveHandler, this)\n      this.map.on('pointermove', this.mapMouseMoveHandler, this)\n    }\n    if (this.plotType && this.feature) {\n      this.plotParams['plotType'] = this.plotType\n      this.feature.setProperties(this.plotParams)\n    }\n  }\n\n  /**\n   * 地图点击事件处理\n   * @param event\n   * @returns {boolean}\n   */\n  mapNextClickHandler (event) {\n    if (!this.plot.freehand) {\n      if (MathDistance(event.coordinate, this.points[this.points.length - 1]) < 0.0001) {\n        return false\n      }\n    }\n    this.points.push(event.coordinate)\n    this.plot.setPoints(this.points)\n    if (this.plot.fixPointCount === this.plot.getPointCount()) {\n      this.mapDoubleClickHandler(event)\n    }\n    if (this.plot && this.plot.freehand) {\n      this.mapDoubleClickHandler(event)\n    }\n  }\n\n  /**\n   * 地图双击事件处理\n   * @param event\n   */\n  mapDoubleClickHandler (event) {\n    event.preventDefault()\n    this.plot.finishDrawing()\n    this.drawEnd(event)\n  }\n\n  /**\n   * 地图事件处理\n   * 鼠标移动事件\n   * @param event\n   * @returns {boolean}\n   */\n  mapMouseMoveHandler (event) {\n    let coordinate = event.coordinate\n    if (MathDistance(coordinate, this.points[this.points.length - 1]) < 0.0001) {\n      return false\n    }\n    if (!this.plot.freehand) {\n      let pnts = this.points.concat([coordinate])\n      this.plot.setPoints(pnts)\n    } else {\n      this.points.push(coordinate)\n      this.plot.setPoints(this.points)\n    }\n  }\n\n  /**\n   * 移除事件监听\n   */\n  removeEventHandlers () {\n    this.map.un('click', this.mapFirstClickHandler, this)\n    this.map.un('click', this.mapNextClickHandler, this)\n    this.map.un('pointermove', this.mapMouseMoveHandler, this)\n    this.map.un('dblclick', this.mapDoubleClickHandler, this)\n  }\n\n  /**\n   * 绘制结束\n   */\n  drawEnd (event) {\n    this.dispatchSync('drawEnd', {\n      type: 'drawEnd',\n      originalEvent: event,\n      feature: this.feature\n    })\n    if (this.feature && this.options['isClear']) {\n      this.drawLayer.getSource().removeFeature(this.feature)\n    }\n    this.disActive()\n  }\n\n  /**\n   * 添加要素\n   */\n  addFeature () {\n    this.feature = new ol.Feature(this.plot)\n    if (this.feature && this.drawLayer) {\n      this.drawLayer.getSource().addFeature(this.feature)\n    }\n  }\n\n  /**\n   * 取消激活地图交互工具\n   */\n  deactiveMapTools () {\n    let interactions = this.map.getInteractions().getArray()\n    interactions.every(item => {\n      if (item instanceof ol.interaction.DoubleClickZoom) {\n        this.dblClickZoomInteraction = item\n        this.map.removeInteraction(item)\n        return false\n      } else {\n        return true\n      }\n    })\n  }\n\n  /**\n   * 激活已取消的地图工具\n   * 还原之前状态\n   */\n  activateMapTools () {\n    if (this.dblClickZoomInteraction && this.dblClickZoomInteraction instanceof ol.interaction.DoubleClickZoom) {\n      this.map.addInteraction(this.dblClickZoomInteraction)\n      this.dblClickZoomInteraction = null\n    }\n  }\n}\nexport default PlotDraw\n","import ol from 'openlayers'\r\nimport Observable from 'observable-emit'\r\nimport * as htmlUtils from '../Utils/domUtils'\r\nimport { BASE_HELP_CONTROL_POINT_ID, BASE_HELP_HIDDEN } from '../Constants'\r\nclass PlotEdit extends Observable {\r\n  constructor (map, options = {}) {\r\n    super()\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n\r\n    /**\r\n     * 配置\r\n     * @type {{}}\r\n     */\r\n    this.options = options\r\n\r\n    /**\r\n     * 当前地图容器\r\n     * @type {Element}\r\n     */\r\n    this.mapViewport = this.map.getViewport()\r\n\r\n    /**\r\n     * 激活绘制工具\r\n     * @type {null}\r\n     */\r\n    this.activePlot = null\r\n    /**\r\n     * 开始点\r\n     * @type {null}\r\n     */\r\n    this.startPoint = null\r\n    /**\r\n     * clone的控制点\r\n     * @type {null}\r\n     */\r\n    this.ghostControlPoints = null\r\n    /**\r\n     * 控制点\r\n     * @type {null}\r\n     */\r\n    this.controlPoints = null\r\n    /**\r\n     * 鼠标移入\r\n     * @type {boolean}\r\n     */\r\n    this.mouseOver = false\r\n    /**\r\n     * 元素\r\n     * @type {{}}\r\n     */\r\n    this.elementTable = {}\r\n    /**\r\n     * 当前激活的控制点的ID\r\n     * @type {null}\r\n     */\r\n    this.activeControlPointId = null\r\n    /**\r\n     * 地图拖拽交互\r\n     * @type {null}\r\n     */\r\n    this.mapDragPan = null\r\n    /**\r\n     * 未激活之前鼠标样式\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.previousCursor_ = null\r\n  }\r\n\r\n  /**\r\n   * 初始化提示DOM\r\n   * @returns {boolean}\r\n   */\r\n  initHelperDom () {\r\n    if (!this.map || !this.activePlot) {\r\n      return false\r\n    }\r\n    let parent = this.getMapParentElement()\r\n    if (!parent) {\r\n      return false\r\n    } else {\r\n      let hiddenDiv = htmlUtils.createHidden('div', parent, BASE_HELP_HIDDEN)\r\n      let cPnts = this.getControlPoints()\r\n      if (cPnts && Array.isArray(cPnts) && cPnts.length > 0) {\r\n        cPnts.forEach((item, index) => {\r\n          let id = BASE_HELP_CONTROL_POINT_ID + '-' + index\r\n          htmlUtils.create('div', BASE_HELP_CONTROL_POINT_ID, hiddenDiv, id)\r\n          this.elementTable[id] = index\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取地图元素的父元素\r\n   * @returns {*}\r\n   */\r\n  getMapParentElement () {\r\n    let mapElement = this.map.getTargetElement()\r\n    if (!mapElement) {\r\n      return false\r\n    } else {\r\n      return mapElement.parentNode\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 销毁帮助提示DOM\r\n   */\r\n  destroyHelperDom () {\r\n    if (this.controlPoints && Array.isArray(this.controlPoints) && this.controlPoints.length > 0) {\r\n      this.controlPoints.forEach((item, index) => {\r\n        if (item && item instanceof ol.Overlay) {\r\n          this.map.removeOverlay(item)\r\n        }\r\n        let element = htmlUtils.getElement(BASE_HELP_CONTROL_POINT_ID + '-' + index)\r\n        if (element) {\r\n          htmlUtils.off(element, 'mousedown', this.controlPointMouseDownHandler.bind(this))\r\n          htmlUtils.off(element, 'mousemove', this.controlPointMouseMoveHandler2.bind(this))\r\n        }\r\n      })\r\n      this.controlPoints = []\r\n    }\r\n    let parent = this.getMapParentElement()\r\n    let hiddenDiv = htmlUtils.getElement(BASE_HELP_HIDDEN)\r\n    if (hiddenDiv && parent) {\r\n      htmlUtils.remove(hiddenDiv, parent)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 初始化要素控制点\r\n   */\r\n  initControlPoints () {\r\n    this.controlPoints = []\r\n    let cPnts = this.getControlPoints()\r\n    if (cPnts && Array.isArray(cPnts) && cPnts.length > 0) {\r\n      if (cPnts.length > this.options['limitControlPoints'] &&\r\n        this.options.hasOwnProperty('limitControlPoints') &&\r\n        this.options['limitControlPoints'] > 2) {\r\n        // TODO 这里其中 `limitControlPoints` 必须包含起止点，所以这里处理了一下\r\n        const _n = Math.floor(cPnts.length / (this.options['limitControlPoints'] - 2)) || 1\r\n        for (let i = 0; i < this.options['limitControlPoints'] - 2; i++) {\r\n          const _index = (i + 1) * _n - 1\r\n          this._addControlPoint(cPnts, _index)\r\n        }\r\n        this._addControlPoint(cPnts, 0)\r\n        this._addControlPoint(cPnts, cPnts.length - 1)\r\n      } else {\r\n        for (let i = 0; i < cPnts.length; i++) {\r\n          this._addControlPoint(cPnts, i)\r\n        }\r\n      }\r\n      this.map.render()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加控制点\r\n   * @param points\r\n   * @param _index\r\n   * @private\r\n   */\r\n  _addControlPoint (points, _index) {\r\n    const id = BASE_HELP_CONTROL_POINT_ID + '-' + _index\r\n    this.elementTable[id] = _index\r\n    const element = htmlUtils.getElement(id)\r\n    const pnt = new ol.Overlay({\r\n      id: id,\r\n      position: points[_index],\r\n      positioning: 'center-center',\r\n      element: element\r\n    })\r\n    this.controlPoints.push(pnt)\r\n    this.map.addOverlay(pnt)\r\n    htmlUtils.on(element, 'mousedown', this.controlPointMouseDownHandler.bind(this))\r\n    htmlUtils.on(element, 'mousemove', this.controlPointMouseMoveHandler2.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 对控制点的移动事件\r\n   * @param e\r\n   */\r\n  controlPointMouseMoveHandler2 (e) {\r\n    e.stopImmediatePropagation()\r\n  }\r\n\r\n  /**\r\n   * 对控制点的鼠标按下事件\r\n   * @param e\r\n   */\r\n  controlPointMouseDownHandler (e) {\r\n    this.activeControlPointId = e.target.id\r\n    this.map.on('pointermove', this.controlPointMouseMoveHandler, this)\r\n    htmlUtils.on(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 对控制点的移动事件\r\n   * @param event\r\n   */\r\n  controlPointMouseMoveHandler (event) {\r\n    let coordinate = event.coordinate\r\n    if (this.activeControlPointId) {\r\n      let plot = this.activePlot.getGeometry()\r\n      let index = this.elementTable[this.activeControlPointId]\r\n      plot.updatePoint(coordinate, index)\r\n      let overlay = this.map.getOverlayById(this.activeControlPointId)\r\n      if (overlay) {\r\n        overlay.setPosition(coordinate)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对控制点的鼠标抬起事件\r\n   * @param event\r\n   */\r\n  controlPointMouseUpHandler (event) {\r\n    this.map.un('pointermove', this.controlPointMouseMoveHandler, this)\r\n    htmlUtils.off(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 激活工具\r\n   * @param plot\r\n   * @returns {boolean}\r\n   */\r\n  activate (plot) {\r\n    if (plot &&\r\n      plot instanceof ol.Feature &&\r\n      plot.get('isPlot') &&\r\n      plot.getGeometry().isPlot &&\r\n      plot !== this.activePlot) {\r\n      this.deactivate()\r\n      this.activePlot = plot\r\n      this.previousCursor_ = this.map.getTargetElement().style.cursor\r\n      window.setTimeout(() => {\r\n        this.dispatch('active_plot_change', this.activePlot)\r\n      }, 500)\r\n      this.map.on('pointermove', this.plotMouseOverOutHandler, this)\r\n      this.initHelperDom()\r\n      this.initControlPoints()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取要素的控制点\r\n   * @returns {Array}\r\n   */\r\n  getControlPoints () {\r\n    let points = []\r\n    if (this.activePlot) {\r\n      let geom = this.activePlot.getGeometry()\r\n      if (geom) {\r\n        points = geom.getPoints()\r\n      }\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 鼠标移出要编辑的要素范围\r\n   * @param e\r\n   * @returns {T|undefined}\r\n   */\r\n  plotMouseOverOutHandler (e) {\r\n    let feature = this.map.forEachFeatureAtPixel(e.pixel, function (feature) {\r\n      return feature\r\n    })\r\n    if (feature && feature === this.activePlot) {\r\n      if (!this.mouseOver) {\r\n        this.mouseOver = true\r\n        this.map.getTargetElement().style.cursor = 'move'\r\n        this.map.on('pointerdown', this.plotMouseDownHandler, this)\r\n      }\r\n    } else {\r\n      if (this.mouseOver) {\r\n        this.mouseOver = false\r\n        this.map.getTargetElement().style.cursor = 'default'\r\n        this.map.un('pointerdown', this.plotMouseDownHandler, this)\r\n      }\r\n    }\r\n    return feature\r\n  }\r\n\r\n  /**\r\n   * 在要编辑的要素按下鼠标按键\r\n   * @param event\r\n   */\r\n  plotMouseDownHandler (event) {\r\n    this.ghostControlPoints = this.getControlPoints()\r\n    this.startPoint = event.coordinate\r\n    this.disableMapDragPan()\r\n    this.map.on('pointerup', this.plotMouseUpHandler, this)\r\n    this.map.on('pointerdrag', this.plotMouseMoveHandler, this)\r\n  }\r\n\r\n  /**\r\n   * 在要编辑的要素上移动鼠标\r\n   * @param event\r\n   */\r\n  plotMouseMoveHandler (event) {\r\n    let [deltaX, deltaY, newPoints] = [event.coordinate[0] - this.startPoint[0], event.coordinate[1] - this.startPoint[1], []]\r\n    if (this.ghostControlPoints && Array.isArray(this.ghostControlPoints) && this.ghostControlPoints.length > 0) {\r\n      for (let i = 0; i < this.ghostControlPoints.length; i++) {\r\n        let coordinate = [this.ghostControlPoints[i][0] + deltaX, this.ghostControlPoints[i][1] + deltaY]\r\n        newPoints.push(coordinate)\r\n        let id = BASE_HELP_CONTROL_POINT_ID + '-' + i\r\n        let overlay = this.map.getOverlayById(id)\r\n        if (overlay) {\r\n          overlay.setPosition(coordinate)\r\n          overlay.setPositioning('center-center')\r\n        }\r\n      }\r\n    }\r\n    const _geometry = this.activePlot.getGeometry()\r\n    _geometry.setPoints(newPoints)\r\n  }\r\n\r\n  /**\r\n   * 鼠标抬起事件\r\n   * @param event\r\n   */\r\n  plotMouseUpHandler (event) {\r\n    this.enableMapDragPan()\r\n    this.map.un('pointerup', this.plotMouseUpHandler, this)\r\n    this.map.un('pointerdrag', this.plotMouseMoveHandler, this)\r\n  }\r\n\r\n  /**\r\n   * 取消事件关联\r\n   */\r\n  disconnectEventHandlers () {\r\n    this.map.un('pointermove', this.plotMouseOverOutHandler, this)\r\n    this.map.un('pointermove', this.controlPointMouseMoveHandler, this)\r\n    htmlUtils.off(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler.bind(this))\r\n    this.map.un('pointerdown', this.plotMouseDownHandler, this)\r\n    this.map.un('pointerup', this.plotMouseUpHandler, this)\r\n    this.map.un('pointerdrag', this.plotMouseMoveHandler, this)\r\n  }\r\n\r\n  /**\r\n   * 取消激活工具\r\n   */\r\n  deactivate () {\r\n    this.activePlot = null\r\n    this.mouseOver = false\r\n    this.map.getTargetElement().style.cursor = this.previousCursor_\r\n    this.previousCursor_ = null\r\n    this.destroyHelperDom()\r\n    this.disconnectEventHandlers()\r\n    this.enableMapDragPan()\r\n    this.elementTable = {}\r\n    this.activeControlPointId = null\r\n    this.startPoint = null\r\n  }\r\n\r\n  /**\r\n   * 禁止地图的拖拽平移\r\n   */\r\n  disableMapDragPan () {\r\n    let interactions = this.map.getInteractions().getArray()\r\n    interactions.every(item => {\r\n      if (item instanceof ol.interaction.DragPan) {\r\n        this.mapDragPan = item\r\n        this.map.removeInteraction(item)\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 激活地图的拖拽平移\r\n   */\r\n  enableMapDragPan () {\r\n    if (this.mapDragPan && this.mapDragPan instanceof ol.interaction.DragPan) {\r\n      this.map.addInteraction(this.mapDragPan)\r\n      this.mapDragPan = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据控制点个数生成控制点\r\n   * @param points\r\n   * @param limit\r\n   * @returns {Array}\r\n   */\r\n  static getLimitControlPoints (points, limit) {\r\n    const _coordinates = []\r\n    if (points && points.length > 0) {\r\n      const _n = Math.floor(points.length / limit) || 1\r\n      for (let i = 0; i < limit; i++) {\r\n        _coordinates.push(points[(i + 1) * _n - 1])\r\n      }\r\n    }\r\n    return _coordinates\r\n  }\r\n}\r\nexport default PlotEdit\r\n","/**\r\n * Created by FDD on 2017/5/1.\r\n * @desc 通过json获取样式\r\n */\r\nimport ol from 'openlayers'\r\nconst StyleFactory = function (options) {\r\n  let option = (options && typeof options === 'object') ? options : {}\r\n  let style = new ol.style.Style({})\r\n  if (option['geometry'] && option['geometry'] instanceof ol.geom.Geometry) {\r\n    style.setGeometry(option['geometry'])\r\n  }\r\n  if (option['zIndex'] && typeof option['zIndex'] === 'number') {\r\n    style.setZIndex(option['zIndex'])\r\n  }\r\n  if (option['fill'] && typeof option['fill'] === 'object') {\r\n    style.setFill(this._getFill(option['fill']))\r\n  }\r\n  if (option['image'] && typeof option['image'] === 'object') {\r\n    style.setImage(this._getImage(option['image']))\r\n  }\r\n  if (option['stroke'] && typeof option['stroke'] === 'object') {\r\n    style.setStroke(this._getStroke(option['stroke']))\r\n  }\r\n  if (option['text'] && typeof option['text'] === 'object') {\r\n    style.setText(this._getText(option['text']))\r\n  }\r\n  return style\r\n}\r\n\r\n/**\r\n * 获取规则样式图形\r\n * @param options\r\n * @returns {*}\r\n * @private\r\n */\r\nStyleFactory.prototype._getRegularShape = function (options) {\r\n  try {\r\n    let regularShape = new ol.style.RegularShape({\r\n      fill: (this._getFill(options['fill']) || undefined),\r\n      points: ((typeof options['points'] === 'number') ? options['points'] : 1),\r\n      radius: ((typeof options['radius'] === 'number') ? options['radius'] : undefined),\r\n      radius1: ((typeof options['radius1'] === 'number') ? options['radius1'] : undefined),\r\n      radius2: ((typeof options['radius2'] === 'number') ? options['radius2'] : undefined),\r\n      angle: ((typeof options['angle'] === 'number') ? options['angle'] : 0),\r\n      snapToPixel: ((typeof options['snapToPixel'] === 'boolean') ? options['snapToPixel'] : true),\r\n      stroke: (this._getStroke(options['stroke']) || undefined),\r\n      rotation: ((typeof options['rotation'] === 'number') ? options['rotation'] : 0),\r\n      rotateWithView: ((typeof options['rotateWithView'] === 'boolean') ? options['rotateWithView'] : false),\r\n      atlasManager: (options['atlasManager'] ? options['atlasManager'] : undefined)\r\n    })\r\n    return regularShape\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取图标样式\r\n * @param options\r\n * @returns {*}\r\n * @private\r\n */\r\nStyleFactory.prototype._getImage = function (options) {\r\n  try {\r\n    let image\r\n    options = options || {}\r\n    if (options['type'] === 'icon') {\r\n      image = this._getIcon(options['image'])\r\n    } else {\r\n      image = this._getRegularShape(options['image'])\r\n    }\r\n    return image\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取icon\r\n * @param options\r\n * @returns {ol.style.Icon}\r\n * @private\r\n */\r\nStyleFactory.prototype._getIcon = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let icon = new ol.style.Icon({\r\n      anchor: (options['imageAnchor'] ? options['imageAnchor'] : [0.5, 0.5]),\r\n      anchorXUnits: (options['imageAnchorXUnits'] ? options['imageAnchorXUnits'] : 'fraction'),\r\n      anchorYUnits: (options['imageAnchorYUnits'] ? options['imageAnchorYUnits'] : 'fraction'),\r\n      anchorOrigin: (options['imageAnchorOrigin'] ? options['imageAnchorYUnits'] : 'top-left'),\r\n      color: (options['imageColor'] ? options['imageColor'] : undefined),\r\n      crossOrigin: (options['crossOrigin'] ? options['crossOrigin'] : undefined),\r\n      img: (options['img'] ? options['img'] : undefined),\r\n      offset: (options['offset'] && Array.isArray(options['offset']) && options['offset'].length === 2 ? options['offset'] : [0, 0]),\r\n      offsetOrigin: (options['offsetOrigin'] ? options['offsetOrigin'] : 'top-left'),\r\n      scale: ((typeof options['scale'] === 'number') ? options['scale'] : 1),\r\n      snapToPixel: (typeof options['snapToPixel'] === 'boolean' ? options['snapToPixel'] : true),\r\n      rotateWithView: (typeof options['rotateWithView'] === 'boolean' ? options['rotateWithView'] : false),\r\n      opacity: (typeof options['imageOpacity'] === 'number' ? options['imageOpacity'] : 1),\r\n      rotation: (typeof options['imageRotation'] === 'number' ? options['imageRotation'] : 0),\r\n      size: (options['size'] && Array.isArray(options['size']) && options['size'].length === 2 ? options['size'] : undefined),\r\n      imgSize: (options['imgSize'] && Array.isArray(options['imgSize']) && options['imgSize'].length === 2 ? options['imgSize'] : undefined),\r\n      src: (options['imageSrc'] ? options['imageSrc'] : undefined)\r\n    })\r\n    return icon\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n/**\r\n * 获取线条样式\r\n * @param options\r\n * @returns {ol.style.Stroke}\r\n * @private\r\n */\r\nStyleFactory.prototype._getStroke = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let stroke = new ol.style.Stroke({\r\n      color: (options['strokeColor'] ? options['strokeColor'] : undefined),\r\n      lineCap: ((options['strokeLineCap'] && typeof options['strokeLineCap'] === 'string') ? options['strokeLineCap'] : 'round'),\r\n      lineJoin: ((options['strokeLineJoin'] && typeof options['strokeLineJoin'] === 'string') ? options['strokeLineJoin'] : 'round'),\r\n      lineDash: (options['strokeLineDash'] ? options['strokeLineDash'] : undefined),\r\n      lineDashOffset: (typeof options['strokeLineDashOffset'] === 'number' ? options['strokeLineDashOffset'] : '0'),\r\n      miterLimit: (typeof options['strokeMiterLimit'] === 'number' ? options['strokeMiterLimit'] : 10),\r\n      width: (typeof options['strokeWidth'] === 'number' ? options['strokeWidth'] : undefined)\r\n    })\r\n    return stroke\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取样式文本\r\n * @param options\r\n * @returns {ol.style.Text}\r\n * @private\r\n */\r\nStyleFactory.prototype._getText = function (options) {\r\n  try {\r\n    let text = new ol.style.Text({\r\n      font: ((options['textFont'] && typeof options['textFont'] === 'string') ? options['textFont'] : '10px sans-serif'),\r\n      offsetX: (typeof options['textOffsetX'] === 'number' ? options['textOffsetX'] : 0),\r\n      offsetY: (typeof options['textOffsetY'] === 'number' ? options['textOffsetY'] : 0),\r\n      scale: (typeof options['textScale'] === 'number' ? options['textScale'] : undefined),\r\n      rotation: (typeof options['textRotation'] === 'number' ? options['textRotation'] : 0),\r\n      text: ((options['text'] && typeof options['text'] === 'string') ? options['text'] : undefined),\r\n      textAlign: ((options['textAlign'] && typeof options['textAlign'] === 'string') ? options['textAlign'] : 'start'),\r\n      textBaseline: ((options['textBaseline'] && typeof options['textBaseline'] === 'string') ? options['textBaseline'] : 'alphabetic'),\r\n      rotateWithView: (typeof options['rotateWithView'] === 'boolean' ? options['rotateWithView'] : false),\r\n      fill: this._getFill(options['textFill']),\r\n      stroke: this._getStroke(options['textStroke'])\r\n    })\r\n    return text\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取填充颜色\r\n * @param options\r\n * @returns {ol.style.Fill}\r\n * @private\r\n */\r\nStyleFactory.prototype._getFill = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let fill = new ol.style.Fill({\r\n      color: (options['fillColor'] ? options['fillColor'] : undefined)\r\n    })\r\n    return fill\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport default StyleFactory\r\n","/**\r\n * Created by FDD on 2017/9/12.\r\n * @desc 标绘相关工具（包含样式修改获取和标绘保存和恢复）\r\n */\r\nimport ol from 'openlayers'\r\nimport olStyleFactory from '../Utils/factory'\r\nimport PlotTextBox from '../Geometry/Text/PlotTextBox'\r\nimport * as Geometry from '../Geometry'\r\nimport { createVectorLayer, getLayerByLayerName } from '../Utils/layerUtils'\r\nimport { BASE_LAYERNAME } from '../Constants'\r\nclass PlotUtils {\r\n  constructor (map, options) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n\r\n    this.options = options\r\n    this.layerName = ((this.options && this.options['layerName']) ? this.options['layerName'] : BASE_LAYERNAME)\r\n  }\r\n\r\n  /**\r\n   * 获取样式信息\r\n   * @param feature\r\n   * @returns {boolean}\r\n   */\r\n  getBaseStyle (feature) {\r\n    let style = feature.getStyle()\r\n    if (!style) {\r\n      let layer = getLayerByLayerName(this.map, this.layerName)\r\n      if (layer && layer instanceof ol.layer.Vector) {\r\n        style = layer.getStyle()\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    return style\r\n  }\r\n\r\n  /**\r\n   * 设置点类型的图标样式\r\n   * @param feature\r\n   * @param image\r\n   */\r\n  setIcon (feature, image) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let _image = this._getImage(image)\r\n        if (_image) {\r\n          tempStyle.setImage(_image)\r\n          feature.setStyle(tempStyle)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置背景颜色\r\n   * @param feature\r\n   * @param backgroundColor\r\n   * @returns {boolean}\r\n   */\r\n  setBackgroundColor (feature, backgroundColor) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let fill = tempStyle.getFill()\r\n        let color = fill.getColor()\r\n        if (color) {\r\n          let tempColor = ol.color.asArray(color)\r\n          let _color = ol.color.asArray(backgroundColor)\r\n          let currentColor = this.handleBackgroundColor(_color, tempColor[3])\r\n          fill.setColor(currentColor)\r\n          feature.setStyle(tempStyle)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置透明度\r\n   * @param feature\r\n   * @param opacity\r\n   */\r\n  setOpacity (feature, opacity) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        if (style) {\r\n          let tempStyle = style.clone()\r\n          let fill = tempStyle.getFill()\r\n          let color = fill.getColor()\r\n          if (color) {\r\n            let tempColor = ol.color.asArray(color)\r\n            tempColor[3] = opacity\r\n            let currentColor = 'rgba(' + tempColor.join(',') + ')'\r\n            fill.setColor(currentColor)\r\n            feature.setStyle(tempStyle)\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置边框颜色\r\n   * @param feature\r\n   * @param borderColor\r\n   */\r\n  setBorderColor (feature, borderColor) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let stroke = tempStyle.getStroke()\r\n        stroke.setColor(borderColor)\r\n        feature.setStyle(tempStyle)\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置边框宽度\r\n   * @param feature\r\n   * @param borderWidth\r\n   */\r\n  setBorderWidth (feature, borderWidth) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let stroke = tempStyle.getStroke()\r\n        stroke.setWidth(borderWidth)\r\n        feature.setStyle(tempStyle)\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理背景色\r\n   * @param color\r\n   * @param opacity\r\n   * @returns {string}\r\n   */\r\n  handleBackgroundColor (color, opacity) {\r\n    try {\r\n      if (!opacity) opacity = 1\r\n      let tempColor = ol.color.asArray(color)\r\n      tempColor[3] = opacity\r\n      return ('rgba(' + tempColor.join(',') + ')')\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取颜色值\r\n   * @param color\r\n   * @returns {string}\r\n   */\r\n  getColor (color) {\r\n    try {\r\n      let colorTarget = ol.color.asArray(color)\r\n      return (ol.color.asString(colorTarget))\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 去除无值的字段\r\n   * @param obj\r\n   * @returns {*}\r\n   */\r\n  fixObject (obj) {\r\n    if (obj && typeof obj === 'object') {\r\n      for (let key in obj) {\r\n        if (key && typeof obj[key] === 'undefined') {\r\n          delete obj[key]\r\n        }\r\n      }\r\n    }\r\n    return obj\r\n  }\r\n\r\n  /**\r\n   * 获取stroke\r\n   * @param style\r\n   * @returns {*}\r\n   */\r\n  getStroke_ (style) {\r\n    let stroke = null\r\n    if (style) {\r\n      let olStyle_ = style.getStroke()\r\n      if (olStyle_) {\r\n        stroke = {}\r\n        stroke['strokeColor'] = this.getColor(olStyle_.getColor())\r\n        stroke['strokeWidth'] = olStyle_.getWidth()\r\n        stroke['strokeLineDash'] = olStyle_.getLineDash()\r\n        stroke['lineDashOffset'] = olStyle_.getLineDashOffset()\r\n        stroke['strokeLineCap'] = olStyle_.getLineCap()\r\n        stroke['strokeLineJoin'] = olStyle_.getLineJoin()\r\n        stroke['strokeMiterLimit'] = olStyle_.getMiterLimit()\r\n      }\r\n    }\r\n    return this.fixObject(stroke)\r\n  }\r\n\r\n  /**\r\n   * 获取填充色\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getFill_ (style) {\r\n    let fill = null\r\n    if (style) {\r\n      let olStyle_ = style.getFill()\r\n      if (olStyle_) {\r\n        fill = {}\r\n        let color = olStyle_.getColor()\r\n        fill['fillColor'] = this.getColor(color)\r\n      }\r\n    }\r\n    return this.fixObject(fill)\r\n  }\r\n\r\n  /**\r\n   * 获取文本信息\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getText_ (style) {\r\n    let text = null\r\n    if (style) {\r\n      let olStyle_ = style.getText()\r\n      if (olStyle_) {\r\n        text = {}\r\n        text['textFont'] = olStyle_.getFont()\r\n        text['textOffsetX'] = olStyle_.getOffsetX()\r\n        text['textOffsetY'] = olStyle_.getOffsetY()\r\n        text['textScale'] = olStyle_.getScale()\r\n        text['textRotation'] = olStyle_.getRotation()\r\n        text['text'] = olStyle_.getText()\r\n        text['textAlign'] = olStyle_.getTextAlign()\r\n        text['textBaseline'] = olStyle_.getTextBaseline()\r\n        text['rotateWithView'] = olStyle_.getRotateWithView()\r\n        text['textFill'] = this.getFill_(olStyle_)\r\n        text['textStroke'] = this.getStroke_(olStyle_)\r\n      }\r\n    }\r\n    return this.fixObject(text)\r\n  }\r\n\r\n  /**\r\n   * 获取图像信息\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getImage_ (style) {\r\n    let image = null\r\n    if (style) {\r\n      let olStyle_ = style.getImage()\r\n      if (olStyle_) {\r\n        image = {}\r\n        if (olStyle_ instanceof ol.style.Icon) {\r\n          image['type'] = 'icon'\r\n          image['image'] = {}\r\n          image['image']['imageAnchor'] = olStyle_.getAnchor()\r\n          image['image']['imageColor'] = olStyle_.getColor()\r\n          image['image']['imageSrc'] = olStyle_.getSrc()\r\n          image['image']['imgSize'] = olStyle_.getSize()\r\n          image['image']['scale'] = olStyle_.getScale()\r\n          image['image']['imageRotation'] = olStyle_.getRotation()\r\n          image['image']['rotateWithView'] = olStyle_.getRotateWithView()\r\n          image['image']['imageOpacity'] = olStyle_.getOpacity()\r\n          image['image']['snapToPixel'] = olStyle_.getSnapToPixel()\r\n          image['image']['offset'] = olStyle_.getOrigin()\r\n        } else if (olStyle_ instanceof ol.style.RegularShape) {\r\n          image['type'] = ''\r\n          image['image'] = {}\r\n          image['image']['fill'] = this.getFill_(olStyle_)\r\n          image['image']['points'] = olStyle_.getPoints()\r\n          image['image']['radius'] = olStyle_.getRadius()\r\n          image['image']['radius2'] = olStyle_.getRadius2()\r\n          image['image']['angle'] = olStyle_.getAngle()\r\n          image['image']['stroke'] = this.getStroke_(olStyle_)\r\n          image['image']['rotateWithView'] = olStyle_.getRotateWithView()\r\n          image['image']['snapToPixel'] = olStyle_.getSnapToPixel()\r\n        }\r\n      }\r\n    }\r\n    return this.fixObject(image)\r\n  }\r\n\r\n  /**\r\n   * 获取样式配置\r\n   * @param feature\r\n   * @returns {{fill: {fillColor: string, opacity: number}, stroke: *, image: *, text: *}}\r\n   */\r\n  getStyleCode (feature) {\r\n    try {\r\n      if (feature && feature instanceof ol.Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        if (style && style instanceof ol.style.Style) {\r\n          // 填充颜色\r\n          let fill = this.getFill_(style)\r\n          let [opacity, rgbaArray, backgroundColor] = [1, null]\r\n          if (fill && fill['fillColor']) {\r\n            rgbaArray = ol.color.asArray(fill['fillColor'])\r\n            opacity = parseFloat(rgbaArray[3])\r\n            if (rgbaArray && typeof opacity === 'number') {\r\n              backgroundColor = this.handleBackgroundColor(ol.color.asString(rgbaArray), opacity)\r\n            }\r\n          }\r\n          // 边框线条\r\n          let stroke = this.getStroke_(style)\r\n          // 文本信息\r\n          let text = this.getText_(style)\r\n          // 获取icon\r\n          let icon = this.getImage_(style)\r\n          return {\r\n            fill: {\r\n              fillColor: backgroundColor,\r\n              opacity: opacity\r\n            },\r\n            stroke: stroke,\r\n            image: icon,\r\n            text: text\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 移除图层上所有的数据\r\n   */\r\n  removeAllFeatures () {\r\n    const layer = getLayerByLayerName(this.map, this.layerName)\r\n    const overlays_ = this.map.getOverlays().getArray()\r\n    if (layer) {\r\n      let source = layer.getSource()\r\n      source.clear()\r\n    }\r\n    if (overlays_ && overlays_.length > 0) {\r\n      let len = overlays_.length\r\n      for (let i = 0; i < len; i++) {\r\n        if (overlays_[i] && overlays_[i].get('isPlotText')) {\r\n          this.map.removeOverlay(overlays_[i])\r\n          i--\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取所有的要素包含样式信息的GeoJSON\r\n   * @returns {Array}\r\n   */\r\n  getFeatures () {\r\n    let rFeatures = []\r\n    let layer = getLayerByLayerName(this.map, this.layerName)\r\n    if (layer) {\r\n      let source = layer.getSource()\r\n      if (source && source instanceof ol.source.Vector) {\r\n        let features = source.getFeatures()\r\n        if (features && features.length > 0) {\r\n          features.forEach((feature, index) => {\r\n            if (feature && feature.getGeometry) {\r\n              let geom = feature.getGeometry()\r\n              if (geom && geom.getCoordinates) {\r\n                let type = geom.getType()\r\n                let coordinates = geom.getCoordinates()\r\n                rFeatures.push({\r\n                  'type': 'Feature',\r\n                  'geometry': {\r\n                    'type': type,\r\n                    'coordinates': coordinates\r\n                  },\r\n                  'properties': {\r\n                    'type': feature.getGeometry().getPlotType(),\r\n                    'style': this.getStyleCode(feature),\r\n                    'points': feature.getGeometry().getPoints()\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n    const overlays_ = this.map.getOverlays().getArray()\r\n    overlays_.forEach(overlay => {\r\n      if (overlay.get('isPlotText')) {\r\n        const style_ = overlay.getStyle()\r\n        style_['width'] = overlay.getWidth() + 'px'\r\n        style_['height'] = overlay.getHeight() + 'px'\r\n        rFeatures.push({\r\n          'type': 'Feature',\r\n          'geometry': {\r\n            'type': 'PlotText',\r\n            'coordinates': overlay.getPosition()\r\n          },\r\n          'properties': {\r\n            'id': overlay.getId(),\r\n            'width': overlay.getWidth(),\r\n            'height': overlay.getHeight(),\r\n            'style': style_,\r\n            'value': overlay.getValue()\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return rFeatures\r\n  }\r\n\r\n  /**\r\n   * 恢复相关标绘\r\n   * @param features\r\n   */\r\n  addFeatures (features) {\r\n    if (features && Array.isArray(features) && features.length > 0) {\r\n      let layer = getLayerByLayerName(this.map, this.layerName)\r\n      if (!layer) {\r\n        layer = createVectorLayer(this.map, this.layerName, {\r\n          create: true\r\n        })\r\n        layer.setZIndex(this.options['zIndex'] || 99)\r\n      }\r\n      if (layer) {\r\n        let source = layer.getSource()\r\n        if (source && source instanceof ol.source.Vector) {\r\n          const _extents = []\r\n          features.forEach(feature => {\r\n            if (feature && feature['geometry'] && feature['geometry']['type'] !== 'PlotText') {\r\n              if (feature['properties']['type'] && Geometry[feature['properties']['type']]) {\r\n                let feat = new ol.Feature({\r\n                  geometry: (new Geometry[feature['properties']['type']]([], feature['properties']['points'], feature['properties']))\r\n                })\r\n                feat.set('isPlot', true)\r\n                _extents.push(feat.getGeometry().getExtent())\r\n                if (feature['properties']['style']) {\r\n                  /* eslint new-cap: 0 */\r\n                  let style_ = new olStyleFactory(feature['properties']['style'])\r\n                  if (style_) {\r\n                    feat.setStyle(style_)\r\n                  }\r\n                }\r\n                source.addFeature(feat)\r\n              } else {\r\n                console.warn('不存在的标绘类型！')\r\n              }\r\n            } else if (feature && feature['geometry'] && feature['geometry']['type'] === 'PlotText') {\r\n              _extents.push((new ol.geom.Point(feature.geometry['coordinates'])).getExtent())\r\n              const _plotText = new PlotTextBox({\r\n                id: feature.properties.id,\r\n                position: feature.geometry['coordinates'],\r\n                width: feature.properties['width'],\r\n                height: feature.properties['height'],\r\n                value: feature.properties['value'],\r\n                style: feature.properties.style\r\n              })\r\n              if (this.map && this.map instanceof ol.Map && _plotText) {\r\n                this.map.addOverlay(_plotText)\r\n              } else {\r\n                console.warn('未传入地图对象或者plotText创建失败！')\r\n              }\r\n            }\r\n          })\r\n          if (this.options['zoomToExtent'] && _extents && _extents.length > 0) {\r\n            const _extent = this._getExtent(_extents)\r\n            const size = this.map.getSize()\r\n            const _view = this.map.getView()\r\n            _view.fit(_extent, {\r\n              size: size,\r\n              duration: 800,\r\n              maxZoom: (_view.getMaxZoom() || undefined)\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get extent\r\n   * @private\r\n   */\r\n  _getExtent (extents, params = {}) {\r\n    const bbox = [ Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY,\r\n      Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY]\r\n    let _extent = extents.reduce(function (prev, coord) {\r\n      return [\r\n        Math.min(coord[0], prev[0]),\r\n        Math.min(coord[1], prev[1]),\r\n        Math.max(coord[2], prev[2]),\r\n        Math.max(coord[3], prev[3])\r\n      ]\r\n    }, bbox)\r\n    let size = ol.extent.getSize(_extent)\r\n    let adjust = typeof params['adjust'] === 'number' ? params['adjust'] : 0.2\r\n    let minWidth = typeof params['minWidth'] === 'number' ? params['minWidth'] : 0.05\r\n    let minHeight = typeof params['minHeight'] === 'number' ? params['minHeight'] : 0.05\r\n    if (size[0] <= minWidth || size[1] <= minHeight) {\r\n      let bleft = ol.extent.getBottomLeft(_extent) // 获取xmin,ymin\r\n      let tright = ol.extent.getTopRight(_extent) // 获取xmax,ymax\r\n      let xmin = bleft[0] - adjust\r\n      let ymin = bleft[1] - adjust\r\n      let xmax = tright[0] + adjust\r\n      let ymax = tright[1] + adjust\r\n      _extent = ol.extent.buffer([xmin, ymin, xmax, ymax], adjust)\r\n    }\r\n    return _extent\r\n  }\r\n}\r\nexport default PlotUtils\r\n","import './scss/index.scss'\r\nimport PlotDraw from './core/PlotDraw'\r\nimport PlotEdit from './core/PlotEdit'\r\nimport PlotUtils from './core/PlotUtils'\r\nimport * as PlotTypes from './Utils/PlotTypes'\r\nimport * as Geometry from './Geometry'\r\nclass olPlot {\r\n  constructor (map, options) {\r\n    this.plotDraw = new PlotDraw(map, options)\r\n    this.plotEdit = new PlotEdit(map, options)\r\n    this.plotUtils = new PlotUtils(map, options)\r\n  }\r\n  static PlotTypes = PlotTypes\r\n  static Geometry = Geometry\r\n}\r\n\r\nexport default olPlot\r\n"],"names":["FITTING_COUNT","HALF_PI","Math","PI","ZERO_TOLERANCE","BASE_LAYERNAME","BASE_HELP_CONTROL_POINT_ID","BASE_HELP_HIDDEN","DEF_TEXT_STYEL","MathDistance","pnt1","pnt2","sqrt","pow","wholeDistance","points","distance","Array","isArray","length","forEach","item","index","getBaseLength","Mid","point1","point2","getCircleCenterOfThreePoints","point3","pntA","pntB","pntC","pntD","getIntersectPoint","f","x","y","e","getAzimuth","startPoint","endPoint","azimuth","angle","asin","abs","getAngleOfThreePoints","isClockWise","pnt3","getCubicValue","t","startPnt","cPnt1","cPnt2","endPnt","max","min","tp","t2","t3","tp2","tp3","getThirdPoint","clockWise","alpha","dx","cos","dy","sin","getArcPoints","center","radius","startAngle","endAngle","pnts","angleDiff","i","push","getBisectorNormals","normal","getNormal","bisectorNormalRight","bisectorNormalLeft","dt","dist","uX","uY","d1","d2","Constants","dX1","dY1","dX2","dY2","getLeftMostControlPoint","controlPoints","controlX","controlY","normalRight","mid","pX","pY","n","nX","nY","a11","a12","a22","dX","dY","getRightMostControlPoint","count","normalLeft","getCurvePoints","leftControl","normals","normalPoints","concat","rightControl","pnt","getBezierPoints","bezierPoints","factor","getBinomialFactor","a","b","getFactorial","result","getQBSplinePoints","bSplinePoints","m","k","getQuadricBSplineFactor","res","getuuid","s","hexDigits","substr","floor","random","join","isObject","type","value","merge","key","$Group","ol","layer","Group","$VectorLayer","Vector","$VectorSource","source","$Style","style","Style","$Stroke","Stroke","$Circle","Circle","$Fill","Fill","getLayerByLayerName","map","layerName","targetLayer","layers","getLayers","getArray","getLayerInternal","log","_target","every","get","createVectorLayer","params","vectorLayer","create","hasOwnProperty","set","selectable","_vectorLayer","addLayer","define","this","SPECIAL_CHARS_REGEXP","MOZ_HACK_REGEXP","tagName","className","container","id","el","document","createElement","appendChild","getElement","getElementById","remove","parent","parentNode","removeChild","createHidden","element","display","camelCase","name","replace","_","separator","letter","offset","toUpperCase","on","addEventListener","event","handler","off","removeEventListener","hasClass","cls","indexOf","Error","classList","contains","getStyle","styleName","computed","defaultView","getComputedStyle","setStyle","prop","filter","isNaN","$DragPan","interaction","DragPan","PlotTextBox","options","stopEvent","positioning","insertFirst","autoPan","autoPanAnimation","autoPanMargin","setOffset","undefined","setPositioning","mapDragPan","isClick_","dragging_","isFocus_","options_","_position","handleTimer_","currentPixel_","createTextContent","_className","content","width","height","minHeight","setAttribute","handleFocus_","bind","handleBlur_","handleClick_","handleDragStart_","window","handleDragEnd_","setElement","createCloseButton","createResizeButton","setPosition","dispatchEvent","getTextAreaFromContent_","_node","childrens_","prototype","slice","call","children","ele","nodeType","nodeName","toLowerCase","_closeSpan","closeCurrentPlotText","_resizeSpan","handleResizeMouseDown_","handleResizeMouseMove_","resizeButtonMoveHandler_","pixel_","pixel","element_","_offset","_size","offsetWidth","offsetHeight","_width","_height","getMap","render","stopImmediatePropagation","getViewport","handleResizeMouseUp_","un","target","_id","getAttribute","_overlay","getOverlayById","removeOverlay","isMoveModel","setTimeout","clearTimeout","disableMapDragPan","preCursor_","cursor","handleDragDrag_","getCoordinateFromPixel","clientX","clientY","enableMapDragPan","range","getSelection","getRangeAt","collapsed","_element","_style","setValue","update","getValue","getWidth","getHeight","_map","addInteraction","interactions","getInteractions","removeInteraction","setMap","Overlay","Map","TEXTAREA","ARC","CURVE","GATHERING_PLACE","POLYLINE","FREEHANDLINE","POINT","PENNANT","RECTANGLE","CIRCLE","ELLIPSE","LUNE","SECTOR","CLOSED_CURVE","POLYGON","FREE_POLYGON","ATTACK_ARROW","DOUBLE_ARROW","STRAIGHT_ARROW","FINE_ARROW","ASSAULT_DIRECTION","TAILED_ATTACK_ARROW","SQUAD_COMBAT","TAILED_SQUAD_COMBAT","RECTFLAG","TRIANGLEFLAG","CURVEFLAG","Point","coordinates","point","fixPointCount","setPoints","setCoordinates","getPlotType","generate","isPlot","getPoints","getPointCount","updatePoint","updateLastPoint","finishDrawing","geom","Pennant","Polyline","freehand","LineString","Arc","PlotUtils","angle1","angle2","generatePoints","Polygon","Curve","FreeHandLine","RectAngle","isFill","extent","boundingExtent","polygon","fromExtent","getCoordinates","start","end","Ellipse","majorRadius","minorRadius","Lune","d","Sector","pList","ClosedCurve","FreePolygon","AttackArrow","headHeightFactor","headWidthFactor","neckHeightFactor","neckWidthFactor","headTailFactor","tailLeft","tailRight","midTail","bonePnts","headPnts","getArrowHeadPoints","neckLeft","neckRight","tailWidthFactor","bodyPnts","getArrowBodyPoints","leftPnts","rightPnts","reverse","getArrowPoints","midPnt","len","midPnt1","midPnt2","arrowPnts","neckLeftPoint","neckRightPoint","lPoints","rPoints","headHeight","headPnt","tailWidth","headWidth","neckWidth","neckHeight","headEndPnt","neckEndPnt","headLeft","headRight","allLen","widthDif","tempLen","leftBodyPnts","rightBodyPnts","w","left","right","getTempPoint4","linePnt1","linePnt2","symPnt","distance1","distance2","DoubleArrow","connPoint","tempPoint4","leftArrowPnts","rightArrowPnts","llBodyPnts","lArrowPnts","lrBodyPnts","rlBodyPnts","rArrowPnts","rrBodyPnts","StraightArrow","maxArrowLength","arrowLengthScale","leftPnt","rightPnt","FineArrow","headAngle","neckAngle","cont","AssaultDirection","TailedAttackArrow","swallowTailFactor","swallowTailPnt","SquadCombat","tailPnts","getTailPoints","TailedSquadCombat","GatheringPlace","RectFlag","calculatePonits","components","point4","TriangleFlag","CurveFlag","point5","point6","point7","point8","point9","point10","point11","curve1","curve2","$DrawInteraction","Draw","$Icon","Icon","PlotDraw","plot","feature","plotType","plotParams","mapViewport","dblClickZoomInteraction","drawInteraction_","drawLayer","setZIndex","createPlot","_params","PlotTypes","Plots","active","disActive","deactiveMapTools","activeInteraction","Object","keys","some","mapFirstClickHandler","warn","createBox","textAreaDrawEnd","getGeometry","getExtent","_center","topLeft","getPixelFromCoordinate","bottomRight","_plotText","addOverlay","info","removeEventHandlers","activateMapTools","isDrawing","coordinate","Feature","getSource","addFeature","drawEnd","mapNextClickHandler","mapDoubleClickHandler","mapMouseMoveHandler","setProperties","preventDefault","dispatchSync","removeFeature","DoubleClickZoom","Observable","PlotEdit","activePlot","ghostControlPoints","mouseOver","elementTable","activeControlPointId","previousCursor_","initHelperDom","getMapParentElement","hiddenDiv","htmlUtils","cPnts","getControlPoints","mapElement","getTargetElement","destroyHelperDom","controlPointMouseDownHandler","controlPointMouseMoveHandler2","initControlPoints","_n","_index","_addControlPoint","controlPointMouseMoveHandler","controlPointMouseUpHandler","overlay","activate","deactivate","dispatch","plotMouseOverOutHandler","forEachFeatureAtPixel","plotMouseDownHandler","plotMouseUpHandler","plotMouseMoveHandler","deltaX","deltaY","newPoints","_geometry","disconnectEventHandlers","getLimitControlPoints","limit","_coordinates","StyleFactory","option","Geometry","setGeometry","babelHelpers.typeof","setFill","_getFill","setImage","_getImage","setStroke","_getStroke","setText","_getText","_getRegularShape","regularShape","RegularShape","image","_getIcon","icon","error","stroke","text","Text","fill","getBaseStyle","setIcon","tempStyle","clone","_image","setBackgroundColor","backgroundColor","getFill","color","getColor","tempColor","asArray","_color","currentColor","handleBackgroundColor","setColor","setOpacity","opacity","setBorderColor","borderColor","getStroke","setBorderWidth","borderWidth","setWidth","colorTarget","asString","fixObject","obj","getStroke_","olStyle_","getLineDash","getLineDashOffset","getLineCap","getLineJoin","getMiterLimit","getFill_","getText_","getText","getFont","getOffsetX","getOffsetY","getScale","getRotation","getTextAlign","getTextBaseline","getRotateWithView","getImage_","getImage","getAnchor","getSrc","getSize","getOpacity","getSnapToPixel","getOrigin","getRadius","getRadius2","getAngle","getStyleCode","rgbaArray","parseFloat","removeAllFeatures","overlays_","getOverlays","clear","getFeatures","rFeatures","features","getType","style_","getPosition","getId","addFeatures","_extents","feat","olStyleFactory","geometry","properties","_extent","_getExtent","size","_view","getView","fit","getMaxZoom","extents","bbox","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","reduce","prev","coord","adjust","minWidth","bleft","getBottomLeft","tright","getTopRight","xmin","ymin","xmax","ymax","buffer","olPlot","plotDraw","plotEdit","plotUtils"],"mappings":"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"}